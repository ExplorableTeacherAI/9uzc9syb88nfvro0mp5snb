import{c as De,r as p,h as bl,j as o,S as vl,L as Tl,a as wl,T as Sl,b as Al,B as Te,P as jl,d as Cl,e as Ml,f as Oi,g as Ii,i as Fi,D as El,k as Pl,l as Dl,m as Hn,n as K,o as Rl,C as wt,p as Nl,q as kl,u as Ll,s as pt,t as jt,v as Vl,w as Jt,x as _l}from"./index-2AFGBfsu.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ol=De("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Il=De("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fl=De("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=De("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=De("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=De("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uo=De("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=De("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ul=De("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=De("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=De("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=De("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $l=De("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Kl=["#ef4444","#f97316","#eab308","#22c55e","#3b82f6","#8b5cf6","#ec4899","#ffffff","#000000"],Gl=[2,4,6,8],Yl=[14,18,24,32],Xl=({targetElement:e,onSend:t,onCancel:n})=>{const s=p.useRef(null),i=p.useRef(null),a=p.useRef(new Map),r=p.useRef(null),[l,c]=p.useState({top:0,left:0,width:0,height:0}),[u,d]=p.useState("draw"),[h,f]=p.useState("#ef4444"),[g,y]=p.useState(4),[x,b]=p.useState(18),[v,E]=p.useState([]),[w,S]=p.useState(!1),[C,N]=p.useState([]),[_,D]=p.useState(null),[k,M]=p.useState(null),[T,O]=p.useState(""),[W,ce]=p.useState(!1);p.useEffect(()=>{let A;const B=()=>{const H=e.getBoundingClientRect();c(R=>R.top!==H.top||R.left!==H.left||R.width!==H.width||R.height!==H.height?{top:H.top,left:H.left,width:H.width,height:H.height}:R),A=requestAnimationFrame(B)};return A=requestAnimationFrame(B),()=>{cancelAnimationFrame(A)}},[e]),p.useEffect(()=>{var B,H;const A=i.current;if(A)if(_&&!k){const R=a.current.get(_);R&&(A.nodes([R]),(B=A.getLayer())==null||B.batchDraw())}else A.nodes([]),(H=A.getLayer())==null||H.batchDraw()},[_,k]),p.useEffect(()=>{const A=H=>{const R=H.target,P=H.clientX,L=H.clientY,I=P>=l.left&&P<=l.left+l.width&&L>=l.top-60&&L<=l.top+l.height,he=R.closest("[data-annotation-toolbar]")!==null,fe=R.closest("[data-radix-popper-content-wrapper]")!==null;!I&&!he&&!fe&&n()},B=setTimeout(()=>{document.addEventListener("mousedown",A)},100);return()=>{clearTimeout(B),document.removeEventListener("mousedown",A)}},[l,n]),p.useEffect(()=>{const A=B=>{if(k){B.key==="Escape"&&Z();return}(B.key==="Delete"||B.key==="Backspace")&&_&&(B.preventDefault(),N(H=>H.filter(R=>R.id!==_)),D(null))};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[_,k]);const Z=p.useCallback(()=>{k&&N(A=>A.map(B=>B.id===k?{...B,text:T}:B)),M(null),O("")},[k,T]),J=A=>{var H,R;const B=A.target===A.target.getStage();if(u==="draw"){D(null),S(!0);const P=(H=A.target.getStage())==null?void 0:H.getPointerPosition();if(P){const L={id:`line-${Date.now()}`,points:[P.x,P.y],color:h,strokeWidth:g};E(I=>[...I,L])}}else if(u==="text"&&B){k&&Z(),D(null);const P=(R=A.target.getStage())==null?void 0:R.getPointerPosition();if(P){const L={id:`text-${Date.now()}`,x:P.x,y:P.y,text:"",color:h,fontSize:x};N(I=>[...I,L]),M(L.id),O(""),setTimeout(()=>{var I;return(I=r.current)==null?void 0:I.focus()},50)}}},z=A=>{var H;if(!w||u!=="draw")return;const B=(H=A.target.getStage())==null?void 0:H.getPointerPosition();B&&E(R=>{const P=[...R],L=P[P.length-1];return L&&(L.points=[...L.points,B.x,B.y]),P})},G=()=>{S(!1)},oe=A=>{k&&k!==A.id&&Z(),D(A.id)},ye=A=>{M(A.id),O(A.text),setTimeout(()=>{var B;return(B=r.current)==null?void 0:B.focus()},50)},Y=(A,B)=>{N(H=>H.map(R=>R.id===B?{...R,x:A.target.x(),y:A.target.y()}:R))},Ce=(A,B)=>{const H=A.target,R=H.scaleX(),P=H.scaleY(),L=C.find(I=>I.id===B);if(L){const I=Math.max(10,Math.round(L.fontSize*Math.max(R,P)));N(he=>he.map(fe=>fe.id===B?{...fe,x:H.x(),y:H.y(),fontSize:I}:fe)),H.scaleX(1),H.scaleY(1)}},re=p.useCallback(()=>{v.length>0?E(A=>A.slice(0,-1)):C.length>0&&N(A=>A.slice(0,-1))},[v.length,C.length]),at=p.useCallback(()=>{E([]),N([]),D(null),M(null)},[]),q=p.useCallback(async()=>{if(s.current){ce(!0);try{D(null),M(null),await new Promise(L=>setTimeout(L,100));const A=await bl(e,{useCORS:!0,logging:!1,backgroundColor:null}),B=s.current.toCanvas({pixelRatio:A.width/l.width}),H=document.createElement("canvas");H.width=A.width,H.height=A.height;const R=H.getContext("2d");R&&(R.drawImage(A,0,0),R.drawImage(B,0,0));const P=H.toDataURL("image/png");t(P)}catch(A){console.error("Error capturing annotation:",A),ce(!1)}}},[e,l.width,t]),Me=C.find(A=>A.id===k);return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"fixed z-[9999]",style:{top:l.top,left:l.left,width:l.width,height:l.height},children:[o.jsx("div",{className:"absolute inset-0 ring-4 rounded-lg pointer-events-none",style:{"--tw-ring-color":"#D4EDE5"}}),o.jsx(vl,{ref:s,width:l.width,height:l.height,onMouseDown:J,onMouseMove:z,onMouseUp:G,onTouchStart:J,onTouchMove:z,onTouchEnd:G,style:{cursor:u==="draw"?"crosshair":"default"},children:o.jsxs(Tl,{children:[v.map(A=>o.jsx(wl,{points:A.points,stroke:A.color,strokeWidth:A.strokeWidth,lineCap:"round",lineJoin:"round",tension:.5,globalCompositeOperation:"source-over"},A.id)),C.map(A=>o.jsx(Sl,{ref:B=>{B?a.current.set(A.id,B):a.current.delete(A.id)},id:A.id,x:A.x,y:A.y,text:A.id===k?"":A.text||"Click to type...",fontSize:A.fontSize,fill:A.id===k?"transparent":A.color,draggable:u==="text",onClick:()=>oe(A),onTap:()=>oe(A),onDblClick:()=>ye(A),onDblTap:()=>ye(A),onDragEnd:B=>Y(B,A.id),onTransformEnd:B=>Ce(B,A.id),opacity:A.text||A.id===k?1:.5},A.id)),o.jsx(Al,{ref:i,rotateEnabled:!1,borderEnabled:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],anchorSize:10,anchorCornerRadius:2,anchorFill:"#0D7377",anchorStroke:"#0D7377",keepRatio:!0})]})}),k&&Me&&o.jsx("textarea",{ref:r,value:T,onChange:A=>O(A.target.value),onBlur:Z,placeholder:"Type text...",className:"absolute bg-transparent border-2 border-[#0D7377] rounded p-1 resize-none focus:outline-none",style:{left:Me.x,top:Me.y,color:Me.color,fontSize:Me.fontSize,minWidth:100,minHeight:Me.fontSize+10},autoFocus:!0}),o.jsx("div",{className:"absolute -top-14 left-0 right-0 flex items-center justify-center gap-2","data-annotation-toolbar":!0,children:o.jsxs("div",{className:"flex items-center gap-2 bg-background/95 backdrop-blur-sm rounded-lg shadow-lg border p-2",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-muted rounded-md p-0.5",children:[o.jsx(Te,{variant:u==="draw"?"default":"ghost",size:"icon",className:`h-7 w-7 ${u==="draw"?"bg-[#D4EDE5] text-[#0D7377] hover:bg-[#C0E5DA]":"hover:bg-[#D4EDE5] hover:text-[#0D7377]"}`,onClick:()=>{d("draw"),D(null)},title:"Draw mode",children:o.jsx(co,{className:"h-4 w-4"})}),o.jsx(Te,{variant:u==="text"?"default":"ghost",size:"icon",className:`h-7 w-7 ${u==="text"?"bg-[#D4EDE5] text-[#0D7377] hover:bg-[#C0E5DA]":"hover:bg-[#D4EDE5] hover:text-[#0D7377]"}`,onClick:()=>d("text"),title:"Text mode",children:o.jsx(Wl,{className:"h-4 w-4"})})]}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsxs(jl,{children:[o.jsx(Cl,{asChild:!0,children:o.jsxs(Te,{variant:"outline",size:"icon",className:"h-8 w-8 relative hover:bg-[#D4EDE5] hover:text-[#0D7377] hover:border-[#D4EDE5]",title:"Color",children:[o.jsx(Fl,{className:"h-4 w-4"}),o.jsx("div",{className:"absolute bottom-0.5 right-0.5 w-2.5 h-2.5 rounded-full border border-background",style:{backgroundColor:h}})]})}),o.jsxs(Ml,{className:"w-auto p-2","data-annotation-toolbar":!0,children:[o.jsx("div",{className:"grid grid-cols-5 gap-1",children:Kl.map(A=>o.jsx("button",{className:`w-6 h-6 rounded-md border-2 ${h===A?"border-primary":"border-transparent"}`,style:{backgroundColor:A},onClick:()=>f(A)},A))}),u==="draw"&&o.jsx(o.Fragment,{children:o.jsxs("div",{className:"mt-2 pt-2 border-t",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Brush Size"}),o.jsx("div",{className:"flex gap-1",children:Gl.map(A=>o.jsx("button",{className:`flex items-center justify-center w-8 h-8 rounded-md ${g===A?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,onClick:()=>y(A),children:o.jsx("div",{className:"rounded-full bg-current",style:{width:A*2,height:A*2}})},A))})]})}),u==="text"&&o.jsxs("div",{className:"mt-2 pt-2 border-t",children:[o.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Font Size"}),o.jsx("div",{className:"flex gap-1",children:Yl.map(A=>o.jsx("button",{className:`flex items-center justify-center w-8 h-8 rounded-md text-xs ${x===A?"bg-primary text-primary-foreground":"bg-muted hover:bg-muted/80"}`,onClick:()=>b(A),children:A},A))})]})]})]}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsx(Te,{variant:"outline",size:"icon",className:"h-8 w-8 hover:bg-[#D4EDE5] hover:text-[#0D7377] hover:border-[#D4EDE5]",onClick:re,disabled:v.length===0&&C.length===0,children:o.jsx(zl,{className:"h-4 w-4"})}),o.jsx(Te,{variant:"outline",size:"icon",className:"h-8 w-8 hover:bg-[#D4EDE5] hover:text-[#0D7377] hover:border-[#D4EDE5]",onClick:at,disabled:v.length===0&&C.length===0,children:o.jsx(Ul,{className:"h-4 w-4"})}),o.jsx("div",{className:"w-px h-6 bg-border"}),o.jsxs(Te,{variant:"outline",size:"sm",onClick:n,className:"h-8 hover:bg-[#D4EDE5] hover:text-[#0D7377] hover:border-[#D4EDE5]",children:[o.jsx($l,{className:"h-4 w-4 mr-1"}),"Cancel"]}),o.jsxs(Te,{variant:"outline",size:"sm",onClick:q,disabled:W,className:"h-8 hover:bg-[#D4EDE5] hover:text-[#0D7377] hover:border-[#D4EDE5]",children:[o.jsx(uo,{className:"h-4 w-4 mr-1"}),W?"Sending...":"Send to Chat"]})]})}),v.length===0&&C.length===0&&!k&&o.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center pointer-events-none",children:o.jsx("div",{className:"bg-background/90 backdrop-blur-sm rounded-md px-3 py-1.5 text-sm text-muted-foreground shadow-sm",children:u==="draw"?"Draw on the section to annotate, then send to chat":"Click to add text. Drag to move. Double-click to edit."})})]})})},ee=({id:e,children:t,className:n="",padding:s="md",isPreview:i=!1,onEditSection:a})=>{const[r,l]=p.useState(!1),c=p.useRef(null),u={none:"",sm:"py-2",md:"py-3",lg:"py-6"};p.useEffect(()=>{const y=x=>{x.detail.sectionId!==e&&r&&l(!1)};return window.addEventListener("annotation-overlay-opened",y),()=>{window.removeEventListener("annotation-overlay-opened",y)}},[e,r]);const d=()=>{window.dispatchEvent(new CustomEvent("annotation-overlay-opened",{detail:{sectionId:e}})),l(!0)},h=()=>{l(!1)},f=y=>{l(!1),e&&(window.parent.postMessage({type:"add-annotation-to-chat",sectionId:e,imageDataUrl:y},"*"),a&&a(`Annotated Section ${e}: [Image attached]`))},g=y=>{if(!i&&e){if(y.target.closest("button"))return;window.parent.postMessage({type:"section-selected",sectionId:e},"*")}};return o.jsxs(o.Fragment,{children:[r&&c.current&&o.jsx(Xl,{targetElement:c.current,onSend:f,onCancel:h,sectionId:e}),o.jsxs("section",{ref:c,id:e,className:`w-full group flex gap-3 pr-3 ${u[s]} ${n} ${i?"":"hover:ring-1 rounded-lg transition-all"}`,style:i?void 0:{"--tw-ring-color":"#D4EDE5"},"data-section-id":e,onClick:g,children:[!i&&o.jsxs("div",{className:"relative z-10 flex items-center gap-px opacity-0 group-hover:opacity-100 transition-opacity pt-1",children:[o.jsxs(Oi,{children:[o.jsx(Ii,{asChild:!0,children:o.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7 hover:bg-[#D4EDE5] hover:text-[#0D7377]",onClick:()=>{console.log("Add section clicked (not implemented in code mode)")},children:o.jsx(Bl,{className:"h-4 w-4"})})}),o.jsx(Fi,{side:"bottom",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Click"})," to add below"]})})]}),o.jsxs(El,{children:[o.jsxs(Oi,{children:[o.jsx(Ii,{asChild:!0,children:o.jsx(Pl,{asChild:!0,children:o.jsx(Te,{variant:"ghost",size:"icon",className:"h-7 w-7 cursor-grab active:cursor-grabbing hover:bg-[#D4EDE5] hover:text-[#0D7377]",children:o.jsx(Il,{className:"h-4 w-4"})})})}),o.jsx(Fi,{side:"bottom",children:o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold",children:"Drag"})," to move",o.jsx("br",{}),o.jsx("span",{className:"font-semibold",children:"Click"})," to open menu"]})})]}),o.jsxs(Dl,{align:"start",children:[o.jsxs(Hn,{className:"text",onClick:()=>{e&&(window.parent.postMessage({type:"add-to-chat",sectionId:e},"*"),a&&a(`Context: Section ${e}`))},children:[o.jsx(uo,{className:"mr-2 h-4 w-4"}),"Add to chat"]}),o.jsxs(Hn,{onClick:d,children:[o.jsx(co,{className:"mr-2 h-4 w-4"}),"Annotate"]}),o.jsx(Hn,{className:"text-destructive",onClick:()=>{console.log("Delete section clicked (not implemented in code mode)")},children:"Delete"})]})]})]}),o.jsx("div",{className:"flex-1 min-w-0",children:t})]})]})},mt=({children:e,className:t="",maxWidth:n="full"})=>{const s={none:"",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-5xl","2xl":"max-w-7xl",full:"max-w-full"};return o.jsx("div",{className:`w-full ${s[n]} ${t}`,"data-layout-type":"full-width",children:e})};/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:ho,setPrototypeOf:Bi,isFrozen:ql,getPrototypeOf:Zl,getOwnPropertyDescriptor:Jl}=Object;let{freeze:Ae,seal:Ve,create:us}=Object,{apply:ds,construct:hs}=typeof Reflect<"u"&&Reflect;Ae||(Ae=function(t){return t});Ve||(Ve=function(t){return t});ds||(ds=function(t,n){for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];return t.apply(n,i)});hs||(hs=function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return new t(...s)});const un=je(Array.prototype.forEach),Ql=je(Array.prototype.lastIndexOf),Ui=je(Array.prototype.pop),Vt=je(Array.prototype.push),ec=je(Array.prototype.splice),yn=je(String.prototype.toLowerCase),Wn=je(String.prototype.toString),zn=je(String.prototype.match),_t=je(String.prototype.replace),tc=je(String.prototype.indexOf),nc=je(String.prototype.trim),Oe=je(Object.prototype.hasOwnProperty),ve=je(RegExp.prototype.test),Ot=sc(TypeError);function je(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return ds(e,t,s)}}function sc(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return hs(e,n)}}function $(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:yn;Bi&&Bi(e,null);let s=t.length;for(;s--;){let i=t[s];if(typeof i=="string"){const a=n(i);a!==i&&(ql(t)||(t[s]=a),i=a)}e[i]=!0}return e}function ic(e){for(let t=0;t<e.length;t++)Oe(e,t)||(e[t]=null);return e}function Ke(e){const t=us(null);for(const[n,s]of ho(e))Oe(e,n)&&(Array.isArray(s)?t[n]=ic(s):s&&typeof s=="object"&&s.constructor===Object?t[n]=Ke(s):t[n]=s);return t}function It(e,t){for(;e!==null;){const s=Jl(e,t);if(s){if(s.get)return je(s.get);if(typeof s.value=="function")return je(s.value)}e=Zl(e)}function n(){return null}return n}const Hi=Ae(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),$n=Ae(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Kn=Ae(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rc=Ae(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Gn=Ae(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),oc=Ae(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Wi=Ae(["#text"]),zi=Ae(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Yn=Ae(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$i=Ae(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),dn=Ae(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ac=Ve(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lc=Ve(/<%[\w\W]*|[\w\W]*%>/gm),cc=Ve(/\$\{[\w\W]*/gm),uc=Ve(/^data-[\-\w.\u00B7-\uFFFF]+$/),dc=Ve(/^aria-[\-\w]+$/),fo=Ve(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),hc=Ve(/^(?:\w+script|data):/i),fc=Ve(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),mo=Ve(/^html$/i),mc=Ve(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ki=Object.freeze({__proto__:null,ARIA_ATTR:dc,ATTR_WHITESPACE:fc,CUSTOM_ELEMENT:mc,DATA_ATTR:uc,DOCTYPE_NAME:mo,ERB_EXPR:lc,IS_ALLOWED_URI:fo,IS_SCRIPT_OR_DATA:hc,MUSTACHE_EXPR:ac,TMPLIT_EXPR:cc});const Ft={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},pc=function(){return typeof window>"u"?null:window},gc=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(s=n.getAttribute(i));const a="dompurify"+(s?"#"+s:"");try{return t.createPolicy(a,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Gi=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function po(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:pc();const t=F=>po(F);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==Ft.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const s=n,i=s.currentScript,{DocumentFragment:a,HTMLTemplateElement:r,Node:l,Element:c,NodeFilter:u,NamedNodeMap:d=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:g}=e,y=c.prototype,x=It(y,"cloneNode"),b=It(y,"remove"),v=It(y,"nextSibling"),E=It(y,"childNodes"),w=It(y,"parentNode");if(typeof r=="function"){const F=n.createElement("template");F.content&&F.content.ownerDocument&&(n=F.content.ownerDocument)}let S,C="";const{implementation:N,createNodeIterator:_,createDocumentFragment:D,getElementsByTagName:k}=n,{importNode:M}=s;let T=Gi();t.isSupported=typeof ho=="function"&&typeof w=="function"&&N&&N.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:W,TMPLIT_EXPR:ce,DATA_ATTR:Z,ARIA_ATTR:J,IS_SCRIPT_OR_DATA:z,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:oe}=Ki;let{IS_ALLOWED_URI:ye}=Ki,Y=null;const Ce=$({},[...Hi,...$n,...Kn,...Gn,...Wi]);let re=null;const at=$({},[...zi,...Yn,...$i,...dn]);let q=Object.seal(us(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Me=null,A=null;const B=Object.seal(us(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let H=!0,R=!0,P=!1,L=!0,I=!1,he=!0,fe=!1,Qe=!1,Ln=!1,lt=!1,sn=!1,rn=!1,bi=!0,vi=!1;const dl="user-content-";let Vn=!0,kt=!1,ct={},ut=null;const Ti=$({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let wi=null;const Si=$({},["audio","video","img","source","image","track"]);let _n=null;const Ai=$({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),on="http://www.w3.org/1998/Math/MathML",an="http://www.w3.org/2000/svg",We="http://www.w3.org/1999/xhtml";let dt=We,On=!1,In=null;const hl=$({},[on,an,We],Wn);let ln=$({},["mi","mo","mn","ms","mtext"]),cn=$({},["annotation-xml"]);const fl=$({},["title","style","font","a","script"]);let Lt=null;const ml=["application/xhtml+xml","text/html"],pl="text/html";let de=null,ht=null;const gl=n.createElement("form"),ji=function(m){return m instanceof RegExp||m instanceof Function},Fn=function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ht&&ht===m)){if((!m||typeof m!="object")&&(m={}),m=Ke(m),Lt=ml.indexOf(m.PARSER_MEDIA_TYPE)===-1?pl:m.PARSER_MEDIA_TYPE,de=Lt==="application/xhtml+xml"?Wn:yn,Y=Oe(m,"ALLOWED_TAGS")?$({},m.ALLOWED_TAGS,de):Ce,re=Oe(m,"ALLOWED_ATTR")?$({},m.ALLOWED_ATTR,de):at,In=Oe(m,"ALLOWED_NAMESPACES")?$({},m.ALLOWED_NAMESPACES,Wn):hl,_n=Oe(m,"ADD_URI_SAFE_ATTR")?$(Ke(Ai),m.ADD_URI_SAFE_ATTR,de):Ai,wi=Oe(m,"ADD_DATA_URI_TAGS")?$(Ke(Si),m.ADD_DATA_URI_TAGS,de):Si,ut=Oe(m,"FORBID_CONTENTS")?$({},m.FORBID_CONTENTS,de):Ti,Me=Oe(m,"FORBID_TAGS")?$({},m.FORBID_TAGS,de):Ke({}),A=Oe(m,"FORBID_ATTR")?$({},m.FORBID_ATTR,de):Ke({}),ct=Oe(m,"USE_PROFILES")?m.USE_PROFILES:!1,H=m.ALLOW_ARIA_ATTR!==!1,R=m.ALLOW_DATA_ATTR!==!1,P=m.ALLOW_UNKNOWN_PROTOCOLS||!1,L=m.ALLOW_SELF_CLOSE_IN_ATTR!==!1,I=m.SAFE_FOR_TEMPLATES||!1,he=m.SAFE_FOR_XML!==!1,fe=m.WHOLE_DOCUMENT||!1,lt=m.RETURN_DOM||!1,sn=m.RETURN_DOM_FRAGMENT||!1,rn=m.RETURN_TRUSTED_TYPE||!1,Ln=m.FORCE_BODY||!1,bi=m.SANITIZE_DOM!==!1,vi=m.SANITIZE_NAMED_PROPS||!1,Vn=m.KEEP_CONTENT!==!1,kt=m.IN_PLACE||!1,ye=m.ALLOWED_URI_REGEXP||fo,dt=m.NAMESPACE||We,ln=m.MATHML_TEXT_INTEGRATION_POINTS||ln,cn=m.HTML_INTEGRATION_POINTS||cn,q=m.CUSTOM_ELEMENT_HANDLING||{},m.CUSTOM_ELEMENT_HANDLING&&ji(m.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=m.CUSTOM_ELEMENT_HANDLING.tagNameCheck),m.CUSTOM_ELEMENT_HANDLING&&ji(m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=m.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),m.CUSTOM_ELEMENT_HANDLING&&typeof m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(q.allowCustomizedBuiltInElements=m.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),I&&(R=!1),sn&&(lt=!0),ct&&(Y=$({},Wi),re=[],ct.html===!0&&($(Y,Hi),$(re,zi)),ct.svg===!0&&($(Y,$n),$(re,Yn),$(re,dn)),ct.svgFilters===!0&&($(Y,Kn),$(re,Yn),$(re,dn)),ct.mathMl===!0&&($(Y,Gn),$(re,$i),$(re,dn))),m.ADD_TAGS&&(typeof m.ADD_TAGS=="function"?B.tagCheck=m.ADD_TAGS:(Y===Ce&&(Y=Ke(Y)),$(Y,m.ADD_TAGS,de))),m.ADD_ATTR&&(typeof m.ADD_ATTR=="function"?B.attributeCheck=m.ADD_ATTR:(re===at&&(re=Ke(re)),$(re,m.ADD_ATTR,de))),m.ADD_URI_SAFE_ATTR&&$(_n,m.ADD_URI_SAFE_ATTR,de),m.FORBID_CONTENTS&&(ut===Ti&&(ut=Ke(ut)),$(ut,m.FORBID_CONTENTS,de)),Vn&&(Y["#text"]=!0),fe&&$(Y,["html","head","body"]),Y.table&&($(Y,["tbody"]),delete Me.tbody),m.TRUSTED_TYPES_POLICY){if(typeof m.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ot('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof m.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ot('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=m.TRUSTED_TYPES_POLICY,C=S.createHTML("")}else S===void 0&&(S=gc(g,i)),S!==null&&typeof C=="string"&&(C=S.createHTML(""));Ae&&Ae(m),ht=m}},Ci=$({},[...$n,...Kn,...rc]),Mi=$({},[...Gn,...oc]),yl=function(m){let j=w(m);(!j||!j.tagName)&&(j={namespaceURI:dt,tagName:"template"});const V=yn(m.tagName),Q=yn(j.tagName);return In[m.namespaceURI]?m.namespaceURI===an?j.namespaceURI===We?V==="svg":j.namespaceURI===on?V==="svg"&&(Q==="annotation-xml"||ln[Q]):!!Ci[V]:m.namespaceURI===on?j.namespaceURI===We?V==="math":j.namespaceURI===an?V==="math"&&cn[Q]:!!Mi[V]:m.namespaceURI===We?j.namespaceURI===an&&!cn[Q]||j.namespaceURI===on&&!ln[Q]?!1:!Mi[V]&&(fl[V]||!Ci[V]):!!(Lt==="application/xhtml+xml"&&In[m.namespaceURI]):!1},Be=function(m){Vt(t.removed,{element:m});try{w(m).removeChild(m)}catch{b(m)}},et=function(m,j){try{Vt(t.removed,{attribute:j.getAttributeNode(m),from:j})}catch{Vt(t.removed,{attribute:null,from:j})}if(j.removeAttribute(m),m==="is")if(lt||sn)try{Be(j)}catch{}else try{j.setAttribute(m,"")}catch{}},Ei=function(m){let j=null,V=null;if(Ln)m="<remove></remove>"+m;else{const ae=zn(m,/^[\r\n\t ]+/);V=ae&&ae[0]}Lt==="application/xhtml+xml"&&dt===We&&(m='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+m+"</body></html>");const Q=S?S.createHTML(m):m;if(dt===We)try{j=new f().parseFromString(Q,Lt)}catch{}if(!j||!j.documentElement){j=N.createDocument(dt,"template",null);try{j.documentElement.innerHTML=On?C:Q}catch{}}const xe=j.body||j.documentElement;return m&&V&&xe.insertBefore(n.createTextNode(V),xe.childNodes[0]||null),dt===We?k.call(j,fe?"html":"body")[0]:fe?j.documentElement:xe},Pi=function(m){return _.call(m.ownerDocument||m,m,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Bn=function(m){return m instanceof h&&(typeof m.nodeName!="string"||typeof m.textContent!="string"||typeof m.removeChild!="function"||!(m.attributes instanceof d)||typeof m.removeAttribute!="function"||typeof m.setAttribute!="function"||typeof m.namespaceURI!="string"||typeof m.insertBefore!="function"||typeof m.hasChildNodes!="function")},Di=function(m){return typeof l=="function"&&m instanceof l};function ze(F,m,j){un(F,V=>{V.call(t,m,j,ht)})}const Ri=function(m){let j=null;if(ze(T.beforeSanitizeElements,m,null),Bn(m))return Be(m),!0;const V=de(m.nodeName);if(ze(T.uponSanitizeElement,m,{tagName:V,allowedTags:Y}),he&&m.hasChildNodes()&&!Di(m.firstElementChild)&&ve(/<[/\w!]/g,m.innerHTML)&&ve(/<[/\w!]/g,m.textContent)||m.nodeType===Ft.progressingInstruction||he&&m.nodeType===Ft.comment&&ve(/<[/\w]/g,m.data))return Be(m),!0;if(!(B.tagCheck instanceof Function&&B.tagCheck(V))&&(!Y[V]||Me[V])){if(!Me[V]&&ki(V)&&(q.tagNameCheck instanceof RegExp&&ve(q.tagNameCheck,V)||q.tagNameCheck instanceof Function&&q.tagNameCheck(V)))return!1;if(Vn&&!ut[V]){const Q=w(m)||m.parentNode,xe=E(m)||m.childNodes;if(xe&&Q){const ae=xe.length;for(let Ee=ae-1;Ee>=0;--Ee){const $e=x(xe[Ee],!0);$e.__removalCount=(m.__removalCount||0)+1,Q.insertBefore($e,v(m))}}}return Be(m),!0}return m instanceof c&&!yl(m)||(V==="noscript"||V==="noembed"||V==="noframes")&&ve(/<\/no(script|embed|frames)/i,m.innerHTML)?(Be(m),!0):(I&&m.nodeType===Ft.text&&(j=m.textContent,un([O,W,ce],Q=>{j=_t(j,Q," ")}),m.textContent!==j&&(Vt(t.removed,{element:m.cloneNode()}),m.textContent=j)),ze(T.afterSanitizeElements,m,null),!1)},Ni=function(m,j,V){if(bi&&(j==="id"||j==="name")&&(V in n||V in gl))return!1;if(!(R&&!A[j]&&ve(Z,j))){if(!(H&&ve(J,j))){if(!(B.attributeCheck instanceof Function&&B.attributeCheck(j,m))){if(!re[j]||A[j]){if(!(ki(m)&&(q.tagNameCheck instanceof RegExp&&ve(q.tagNameCheck,m)||q.tagNameCheck instanceof Function&&q.tagNameCheck(m))&&(q.attributeNameCheck instanceof RegExp&&ve(q.attributeNameCheck,j)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(j,m))||j==="is"&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&ve(q.tagNameCheck,V)||q.tagNameCheck instanceof Function&&q.tagNameCheck(V))))return!1}else if(!_n[j]){if(!ve(ye,_t(V,G,""))){if(!((j==="src"||j==="xlink:href"||j==="href")&&m!=="script"&&tc(V,"data:")===0&&wi[m])){if(!(P&&!ve(z,_t(V,G,"")))){if(V)return!1}}}}}}}return!0},ki=function(m){return m!=="annotation-xml"&&zn(m,oe)},Li=function(m){ze(T.beforeSanitizeAttributes,m,null);const{attributes:j}=m;if(!j||Bn(m))return;const V={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:re,forceKeepAttr:void 0};let Q=j.length;for(;Q--;){const xe=j[Q],{name:ae,namespaceURI:Ee,value:$e}=xe,ft=de(ae),Un=$e;let me=ae==="value"?Un:nc(Un);if(V.attrName=ft,V.attrValue=me,V.keepAttr=!0,V.forceKeepAttr=void 0,ze(T.uponSanitizeAttribute,m,V),me=V.attrValue,vi&&(ft==="id"||ft==="name")&&(et(ae,m),me=dl+me),he&&ve(/((--!?|])>)|<\/(style|title|textarea)/i,me)){et(ae,m);continue}if(ft==="attributename"&&zn(me,"href")){et(ae,m);continue}if(V.forceKeepAttr)continue;if(!V.keepAttr){et(ae,m);continue}if(!L&&ve(/\/>/i,me)){et(ae,m);continue}I&&un([O,W,ce],_i=>{me=_t(me,_i," ")});const Vi=de(m.nodeName);if(!Ni(Vi,ft,me)){et(ae,m);continue}if(S&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Ee)switch(g.getAttributeType(Vi,ft)){case"TrustedHTML":{me=S.createHTML(me);break}case"TrustedScriptURL":{me=S.createScriptURL(me);break}}if(me!==Un)try{Ee?m.setAttributeNS(Ee,ae,me):m.setAttribute(ae,me),Bn(m)?Be(m):Ui(t.removed)}catch{et(ae,m)}}ze(T.afterSanitizeAttributes,m,null)},xl=function F(m){let j=null;const V=Pi(m);for(ze(T.beforeSanitizeShadowDOM,m,null);j=V.nextNode();)ze(T.uponSanitizeShadowNode,j,null),Ri(j),Li(j),j.content instanceof a&&F(j.content);ze(T.afterSanitizeShadowDOM,m,null)};return t.sanitize=function(F){let m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},j=null,V=null,Q=null,xe=null;if(On=!F,On&&(F="<!-->"),typeof F!="string"&&!Di(F))if(typeof F.toString=="function"){if(F=F.toString(),typeof F!="string")throw Ot("dirty is not a string, aborting")}else throw Ot("toString is not a function");if(!t.isSupported)return F;if(Qe||Fn(m),t.removed=[],typeof F=="string"&&(kt=!1),kt){if(F.nodeName){const $e=de(F.nodeName);if(!Y[$e]||Me[$e])throw Ot("root node is forbidden and cannot be sanitized in-place")}}else if(F instanceof l)j=Ei("<!---->"),V=j.ownerDocument.importNode(F,!0),V.nodeType===Ft.element&&V.nodeName==="BODY"||V.nodeName==="HTML"?j=V:j.appendChild(V);else{if(!lt&&!I&&!fe&&F.indexOf("<")===-1)return S&&rn?S.createHTML(F):F;if(j=Ei(F),!j)return lt?null:rn?C:""}j&&Ln&&Be(j.firstChild);const ae=Pi(kt?F:j);for(;Q=ae.nextNode();)Ri(Q),Li(Q),Q.content instanceof a&&xl(Q.content);if(kt)return F;if(lt){if(sn)for(xe=D.call(j.ownerDocument);j.firstChild;)xe.appendChild(j.firstChild);else xe=j;return(re.shadowroot||re.shadowrootmode)&&(xe=M.call(s,xe,!0)),xe}let Ee=fe?j.outerHTML:j.innerHTML;return fe&&Y["!doctype"]&&j.ownerDocument&&j.ownerDocument.doctype&&j.ownerDocument.doctype.name&&ve(mo,j.ownerDocument.doctype.name)&&(Ee="<!DOCTYPE "+j.ownerDocument.doctype.name+`>
`+Ee),I&&un([O,W,ce],$e=>{Ee=_t(Ee,$e," ")}),S&&rn?S.createHTML(Ee):Ee},t.setConfig=function(){let F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fn(F),Qe=!0},t.clearConfig=function(){ht=null,Qe=!1},t.isValidAttribute=function(F,m,j){ht||Fn({});const V=de(F),Q=de(m);return Ni(V,Q,j)},t.addHook=function(F,m){typeof m=="function"&&Vt(T[F],m)},t.removeHook=function(F,m){if(m!==void 0){const j=Ql(T[F],m);return j===-1?void 0:ec(T[F],j,1)[0]}return Ui(T[F])},t.removeHooks=function(F){T[F]=[]},t.removeAllHooks=function(){T=Gi()},t}var yc=po();const te=({children:e,level:t=1,className:n="",enableMath:s=!0})=>{const i=p.useRef(null);p.useEffect(()=>{if(!s)return;const l=i.current,c=window.MathJax;if(!(!l||!c))try{c.typesetPromise?c.typesetPromise([l]).catch(()=>{}):c.typeset&&c.typeset([l])}catch{}},[e,s]);const r=`${{1:"text-4xl font-bold mb-4",2:"text-3xl font-bold mb-3",3:"text-2xl font-semibold mb-3",4:"text-xl font-semibold mb-2",5:"text-lg font-semibold mb-2",6:"text-base font-semibold mb-2"}[t]} ${s?"mathjax-process":"no-mathjax"} ${n}`.trim();if(typeof e=="string"){const l=yc.sanitize(e,{USE_PROFILES:{html:!0}});switch(t){case 1:return o.jsx("h1",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});case 2:return o.jsx("h2",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});case 3:return o.jsx("h3",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});case 4:return o.jsx("h4",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});case 5:return o.jsx("h5",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});case 6:return o.jsx("h6",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}});default:return o.jsx("h1",{ref:i,className:r,dangerouslySetInnerHTML:{__html:l}})}}switch(t){case 1:return o.jsx("h1",{ref:i,className:r,children:e});case 2:return o.jsx("h2",{ref:i,className:r,children:e});case 3:return o.jsx("h3",{ref:i,className:r,children:e});case 4:return o.jsx("h4",{ref:i,className:r,children:e});case 5:return o.jsx("h5",{ref:i,className:r,children:e});case 6:return o.jsx("h6",{ref:i,className:r,children:e});default:return o.jsx("h1",{ref:i,className:r,children:e})}},X=({children:e,className:t="",enableMath:n=!0})=>{const s=p.useRef(null);return p.useEffect(()=>{if(!n)return;const i=s.current,a=window.MathJax;if(!(!i||!a))try{a.typesetPromise?a.typesetPromise([i]).catch(()=>{}):a.typeset&&a.typeset([i])}catch{}},[e,n]),o.jsx("p",{ref:s,className:`text-base leading-relaxed ${n?"mathjax-process":"no-mathjax"} ${t}`,children:e})},Fs=p.createContext({});function Bs(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const Us=typeof window<"u",go=Us?p.useLayoutEffect:p.useEffect,Pn=p.createContext(null);function Hs(e,t){e.indexOf(t)===-1&&e.push(t)}function Ws(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ge=(e,t,n)=>n>t?t:n<e?e:n;let wn=()=>{};const Ye={},yo=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function xo(e){return typeof e=="object"&&e!==null}const bo=e=>/^0[^.\s]+$/u.test(e);function zs(e){let t;return()=>(t===void 0&&(t=e()),t)}const ke=e=>e,xc=(e,t)=>n=>t(e(n)),Qt=(...e)=>e.reduce(xc),Kt=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s};class $s{constructor(){this.subscriptions=[]}add(t){return Hs(this.subscriptions,t),()=>Ws(this.subscriptions,t)}notify(t,n,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,s);else for(let a=0;a<i;a++){const r=this.subscriptions[a];r&&r(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ue=e=>e*1e3,Ne=e=>e/1e3;function vo(e,t){return t?e*(1e3/t):0}const To=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,bc=1e-7,vc=12;function Tc(e,t,n,s,i){let a,r,l=0;do r=t+(n-t)/2,a=To(r,s,i)-e,a>0?n=r:t=r;while(Math.abs(a)>bc&&++l<vc);return r}function en(e,t,n,s){if(e===t&&n===s)return ke;const i=a=>Tc(a,0,1,e,n);return a=>a===0||a===1?a:To(i(a),t,s)}const wo=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,So=e=>t=>1-e(1-t),Ao=en(.33,1.53,.69,.99),Ks=So(Ao),jo=wo(Ks),Co=e=>(e*=2)<1?.5*Ks(e):.5*(2-Math.pow(2,-10*(e-1))),Gs=e=>1-Math.sin(Math.acos(e)),Mo=So(Gs),Eo=wo(Gs),wc=en(.42,0,1,1),Sc=en(0,0,.58,1),Po=en(.42,0,.58,1),Ac=e=>Array.isArray(e)&&typeof e[0]!="number",Do=e=>Array.isArray(e)&&typeof e[0]=="number",Yi={linear:ke,easeIn:wc,easeInOut:Po,easeOut:Sc,circIn:Gs,circInOut:Eo,circOut:Mo,backIn:Ks,backInOut:jo,backOut:Ao,anticipate:Co},jc=e=>typeof e=="string",Xi=e=>{if(Do(e)){wn(e.length===4);const[t,n,s,i]=e;return en(t,n,s,i)}else if(jc(e))return wn(Yi[e]!==void 0),Yi[e];return e},hn=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],qi={value:null,addProjectionMetrics:null};function Cc(e,t){let n=new Set,s=new Set,i=!1,a=!1;const r=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){r.has(h)&&(d.schedule(h),e()),c++,h(l)}const d={schedule:(h,f=!1,g=!1)=>{const x=g&&i?n:s;return f&&r.add(h),x.has(h)||x.add(h),h},cancel:h=>{s.delete(h),r.delete(h)},process:h=>{if(l=h,i){a=!0;return}i=!0,[n,s]=[s,n],n.forEach(u),t&&qi.value&&qi.value.frameloop[t].push(c),c=0,n.clear(),i=!1,a&&(a=!1,d.process(h))}};return d}const Mc=40;function Ro(e,t){let n=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,r=hn.reduce((w,S)=>(w[S]=Cc(a,t?S:void 0),w),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:g,postRender:y}=r,x=()=>{const w=Ye.useManualTiming?i.timestamp:performance.now();n=!1,Ye.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(w-i.timestamp,Mc),1)),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),d.process(i),h.process(i),f.process(i),g.process(i),y.process(i),i.isProcessing=!1,n&&t&&(s=!1,e(x))},b=()=>{n=!0,s=!0,i.isProcessing||e(x)};return{schedule:hn.reduce((w,S)=>{const C=r[S];return w[S]=(N,_=!1,D=!1)=>(n||b(),C.schedule(N,_,D)),w},{}),cancel:w=>{for(let S=0;S<hn.length;S++)r[hn[S]].cancel(w)},state:i,steps:r}}const{schedule:ne,cancel:qe,state:pe,steps:Xn}=Ro(typeof requestAnimationFrame<"u"?requestAnimationFrame:ke,!0);let xn;function Ec(){xn=void 0}const Pe={now:()=>(xn===void 0&&Pe.set(pe.isProcessing||Ye.useManualTiming?pe.timestamp:performance.now()),xn),set:e=>{xn=e,queueMicrotask(Ec)}},No=e=>t=>typeof t=="string"&&t.startsWith(e),Ys=No("--"),Pc=No("var(--"),Xs=e=>Pc(e)?Dc.test(e.split("/*")[0].trim()):!1,Dc=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ct={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Gt={...Ct,transform:e=>Ge(0,1,e)},fn={...Ct,default:1},Ht=e=>Math.round(e*1e5)/1e5,qs=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rc(e){return e==null}const Nc=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Zs=(e,t)=>n=>!!(typeof n=="string"&&Nc.test(n)&&n.startsWith(e)||t&&!Rc(n)&&Object.prototype.hasOwnProperty.call(n,t)),ko=(e,t,n)=>s=>{if(typeof s!="string")return s;const[i,a,r,l]=s.match(qs);return{[e]:parseFloat(i),[t]:parseFloat(a),[n]:parseFloat(r),alpha:l!==void 0?parseFloat(l):1}},kc=e=>Ge(0,255,e),qn={...Ct,transform:e=>Math.round(kc(e))},st={test:Zs("rgb","red"),parse:ko("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+qn.transform(e)+", "+qn.transform(t)+", "+qn.transform(n)+", "+Ht(Gt.transform(s))+")"};function Lc(e){let t="",n="",s="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const fs={test:Zs("#"),parse:Lc,transform:st.transform},tn=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Xe=tn("deg"),He=tn("%"),U=tn("px"),Vc=tn("vh"),_c=tn("vw"),Zi={...He,parse:e=>He.parse(e)/100,transform:e=>He.transform(e*100)},gt={test:Zs("hsl","hue"),parse:ko("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+He.transform(Ht(t))+", "+He.transform(Ht(n))+", "+Ht(Gt.transform(s))+")"},le={test:e=>st.test(e)||fs.test(e)||gt.test(e),parse:e=>st.test(e)?st.parse(e):gt.test(e)?gt.parse(e):fs.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?st.transform(e):gt.transform(e),getAnimatableNone:e=>{const t=le.parse(e);return t.alpha=0,le.transform(t)}},Oc=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Ic(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(qs))==null?void 0:t.length)||0)+(((n=e.match(Oc))==null?void 0:n.length)||0)>0}const Lo="number",Vo="color",Fc="var",Bc="var(",Ji="${}",Uc=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Yt(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},i=[];let a=0;const l=t.replace(Uc,c=>(le.test(c)?(s.color.push(a),i.push(Vo),n.push(le.parse(c))):c.startsWith(Bc)?(s.var.push(a),i.push(Fc),n.push(c)):(s.number.push(a),i.push(Lo),n.push(parseFloat(c))),++a,Ji)).split(Ji);return{values:n,split:l,indexes:s,types:i}}function _o(e){return Yt(e).values}function Oo(e){const{split:t,types:n}=Yt(e),s=t.length;return i=>{let a="";for(let r=0;r<s;r++)if(a+=t[r],i[r]!==void 0){const l=n[r];l===Lo?a+=Ht(i[r]):l===Vo?a+=le.transform(i[r]):a+=i[r]}return a}}const Hc=e=>typeof e=="number"?0:le.test(e)?le.getAnimatableNone(e):e;function Wc(e){const t=_o(e);return Oo(e)(t.map(Hc))}const Ze={test:Ic,parse:_o,createTransformer:Oo,getAnimatableNone:Wc};function Zn(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function zc({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let i=0,a=0,r=0;if(!t)i=a=r=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=Zn(c,l,e+1/3),a=Zn(c,l,e),r=Zn(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(r*255),alpha:s}}function Sn(e,t){return n=>n>0?t:e}const se=(e,t,n)=>e+(t-e)*n,Jn=(e,t,n)=>{const s=e*e,i=n*(t*t-s)+s;return i<0?0:Math.sqrt(i)},$c=[fs,st,gt],Kc=e=>$c.find(t=>t.test(e));function Qi(e){const t=Kc(e);if(!t)return!1;let n=t.parse(e);return t===gt&&(n=zc(n)),n}const er=(e,t)=>{const n=Qi(e),s=Qi(t);if(!n||!s)return Sn(e,t);const i={...n};return a=>(i.red=Jn(n.red,s.red,a),i.green=Jn(n.green,s.green,a),i.blue=Jn(n.blue,s.blue,a),i.alpha=se(n.alpha,s.alpha,a),st.transform(i))},ms=new Set(["none","hidden"]);function Gc(e,t){return ms.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Yc(e,t){return n=>se(e,t,n)}function Js(e){return typeof e=="number"?Yc:typeof e=="string"?Xs(e)?Sn:le.test(e)?er:Zc:Array.isArray(e)?Io:typeof e=="object"?le.test(e)?er:Xc:Sn}function Io(e,t){const n=[...e],s=n.length,i=e.map((a,r)=>Js(a)(a,t[r]));return a=>{for(let r=0;r<s;r++)n[r]=i[r](a);return n}}function Xc(e,t){const n={...e,...t},s={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(s[i]=Js(e[i])(e[i],t[i]));return i=>{for(const a in s)n[a]=s[a](i);return n}}function qc(e,t){const n=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],r=e.indexes[a][s[a]],l=e.values[r]??0;n[i]=l,s[a]++}return n}const Zc=(e,t)=>{const n=Ze.createTransformer(t),s=Yt(e),i=Yt(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?ms.has(e)&&!i.values.length||ms.has(t)&&!s.values.length?Gc(e,t):Qt(Io(qc(s,i),i.values),n):Sn(e,t)};function Fo(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?se(e,t,n):Js(e)(e,t)}const Jc=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>ne.update(t,n),stop:()=>qe(t),now:()=>pe.isProcessing?pe.timestamp:Pe.now()}},Bo=(e,t,n=10)=>{let s="";const i=Math.max(Math.round(t/n),2);for(let a=0;a<i;a++)s+=Math.round(e(a/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},An=2e4;function Qs(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<An;)t+=n,s=e.next(t);return t>=An?1/0:t}function Qc(e,t=100,n){const s=n({...e,keyframes:[0,t]}),i=Math.min(Qs(s),An);return{type:"keyframes",ease:a=>s.next(i*a).value/t,duration:Ne(i)}}const eu=5;function Uo(e,t,n){const s=Math.max(t-eu,0);return vo(n-e(s),t-s)}const ie={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qn=.001;function tu({duration:e=ie.duration,bounce:t=ie.bounce,velocity:n=ie.velocity,mass:s=ie.mass}){let i,a,r=1-t;r=Ge(ie.minDamping,ie.maxDamping,r),e=Ge(ie.minDuration,ie.maxDuration,Ne(e)),r<1?(i=u=>{const d=u*r,h=d*e,f=d-n,g=ps(u,r),y=Math.exp(-h);return Qn-f/g*y},a=u=>{const h=u*r*e,f=h*n+n,g=Math.pow(r,2)*Math.pow(u,2)*e,y=Math.exp(-h),x=ps(Math.pow(u,2),r);return(-i(u)+Qn>0?-1:1)*((f-g)*y)/x}):(i=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-Qn+d*h},a=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const l=5/e,c=su(i,a,l);if(e=Ue(e),isNaN(c))return{stiffness:ie.stiffness,damping:ie.damping,duration:e};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:r*2*Math.sqrt(s*u),duration:e}}}const nu=12;function su(e,t,n){let s=n;for(let i=1;i<nu;i++)s=s-e(s)/t(s);return s}function ps(e,t){return e*Math.sqrt(1-t*t)}const iu=["duration","bounce"],ru=["stiffness","damping","mass"];function tr(e,t){return t.some(n=>e[n]!==void 0)}function ou(e){let t={velocity:ie.velocity,stiffness:ie.stiffness,damping:ie.damping,mass:ie.mass,isResolvedFromDuration:!1,...e};if(!tr(e,ru)&&tr(e,iu))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),i=s*s,a=2*Ge(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:ie.mass,stiffness:i,damping:a}}else{const n=tu(e);t={...t,...n,mass:ie.mass},t.isResolvedFromDuration=!0}return t}function jn(e=ie.visualDuration,t=ie.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=n;const a=n.keyframes[0],r=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:g}=ou({...n,velocity:-Ne(n.velocity||0)}),y=f||0,x=u/(2*Math.sqrt(c*d)),b=r-a,v=Ne(Math.sqrt(c/d)),E=Math.abs(b)<5;s||(s=E?ie.restSpeed.granular:ie.restSpeed.default),i||(i=E?ie.restDelta.granular:ie.restDelta.default);let w;if(x<1){const C=ps(v,x);w=N=>{const _=Math.exp(-x*v*N);return r-_*((y+x*v*b)/C*Math.sin(C*N)+b*Math.cos(C*N))}}else if(x===1)w=C=>r-Math.exp(-v*C)*(b+(y+v*b)*C);else{const C=v*Math.sqrt(x*x-1);w=N=>{const _=Math.exp(-x*v*N),D=Math.min(C*N,300);return r-_*((y+x*v*b)*Math.sinh(D)+C*b*Math.cosh(D))/C}}const S={calculatedDuration:g&&h||null,next:C=>{const N=w(C);if(g)l.done=C>=h;else{let _=C===0?y:0;x<1&&(_=C===0?Ue(y):Uo(w,C,N));const D=Math.abs(_)<=s,k=Math.abs(r-N)<=i;l.done=D&&k}return l.value=l.done?r:N,l},toString:()=>{const C=Math.min(Qs(S),An),N=Bo(_=>S.next(C*_).value,C,30);return C+"ms "+N},toTransition:()=>{}};return S}jn.applyToOptions=e=>{const t=Qc(e,100,jn);return e.ease=t.ease,e.duration=Ue(t.duration),e.type="keyframes",e};function gs({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:r,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},g=D=>l!==void 0&&D<l||c!==void 0&&D>c,y=D=>l===void 0?c:c===void 0||Math.abs(l-D)<Math.abs(c-D)?l:c;let x=n*t;const b=h+x,v=r===void 0?b:r(b);v!==b&&(x=v-h);const E=D=>-x*Math.exp(-D/s),w=D=>v+E(D),S=D=>{const k=E(D),M=w(D);f.done=Math.abs(k)<=u,f.value=f.done?v:M};let C,N;const _=D=>{g(f.value)&&(C=D,N=jn({keyframes:[f.value,y(f.value)],velocity:Uo(w,D,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:D=>{let k=!1;return!N&&C===void 0&&(k=!0,S(D),_(D)),C!==void 0&&D>=C?N.next(D-C):(!k&&S(D),f)}}}function au(e,t,n){const s=[],i=n||Ye.mix||Fo,a=e.length-1;for(let r=0;r<a;r++){let l=i(e[r],e[r+1]);if(t){const c=Array.isArray(t)?t[r]||ke:t;l=Qt(c,l)}s.push(l)}return s}function lu(e,t,{clamp:n=!0,ease:s,mixer:i}={}){const a=e.length;if(wn(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const r=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=au(t,s,i),c=l.length,u=d=>{if(r&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Kt(e[h],e[h+1],d);return l[h](f)};return n?d=>u(Ge(e[0],e[a-1],d)):u}function cu(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const i=Kt(0,t,s);e.push(se(n,1,i))}}function uu(e){const t=[0];return cu(t,e.length-1),t}function du(e,t){return e.map(n=>n*t)}function hu(e,t){return e.map(()=>t||Po).splice(0,e.length-1)}function Wt({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const i=Ac(s)?s.map(Xi):Xi(s),a={done:!1,value:t[0]},r=du(n&&n.length===t.length?n:uu(t),e),l=lu(r,t,{ease:Array.isArray(i)?i:hu(t,i)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const fu=e=>e!==null;function ei(e,{repeat:t,repeatType:n="loop"},s,i=1){const a=e.filter(fu),l=i<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||s===void 0?a[l]:s}const mu={decay:gs,inertia:gs,tween:Wt,keyframes:Wt,spring:jn};function Ho(e){typeof e.type=="string"&&(e.type=mu[e.type])}class ti{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const pu=e=>e/100;class ni extends ti{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Pe.now()&&this.tick(Pe.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Ho(t);const{type:n=Wt,repeat:s=0,repeatDelay:i=0,repeatType:a,velocity:r=0}=t;let{keyframes:l}=t;const c=n||Wt;c!==Wt&&typeof l[0]!="number"&&(this.mixKeyframes=Qt(pu,Fo(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-r})),u.calculatedDuration===null&&(u.calculatedDuration=Qs(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:s,totalDuration:i,mixKeyframes:a,mirroredGenerator:r,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return s.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:g,type:y,onUpdate:x,finalKeyframe:b}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),E=this.playbackSpeed>=0?v<0:v>i;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,S=s;if(h){const D=Math.min(this.currentTime,i)/l;let k=Math.floor(D),M=D%1;!M&&D>=1&&(M=1),M===1&&k--,k=Math.min(k,h+1),!!(k%2)&&(f==="reverse"?(M=1-M,g&&(M-=g/l)):f==="mirror"&&(S=r)),w=Ge(0,1,M)*l}const C=E?{done:!1,value:d[0]}:S.next(w);a&&(C.value=a(C.value));let{done:N}=C;!E&&c!==null&&(N=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return _&&y!==gs&&(C.value=ei(d,this.options,b,this.speed)),x&&x(C.value),_&&this.finish(),C}then(t,n){return this.finished.then(t,n)}get duration(){return Ne(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ne(t)}get time(){return Ne(this.currentTime)}set time(t){var n;t=Ue(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Pe.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Ne(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:t=Jc,startTime:n}=this.options;this.driver||(this.driver=t(r=>this.tick(r))),(a=(i=this.options).onPlay)==null||a.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=n??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pe.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function gu(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const it=e=>e*180/Math.PI,ys=e=>{const t=it(Math.atan2(e[1],e[0]));return xs(t)},yu={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:ys,rotateZ:ys,skewX:e=>it(Math.atan(e[1])),skewY:e=>it(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},xs=e=>(e=e%360,e<0&&(e+=360),e),nr=ys,sr=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),ir=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),xu={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:sr,scaleY:ir,scale:e=>(sr(e)+ir(e))/2,rotateX:e=>xs(it(Math.atan2(e[6],e[5]))),rotateY:e=>xs(it(Math.atan2(-e[2],e[0]))),rotateZ:nr,rotate:nr,skewX:e=>it(Math.atan(e[4])),skewY:e=>it(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function bs(e){return e.includes("scale")?1:0}function vs(e,t){if(!e||e==="none")return bs(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(n)s=xu,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=yu,i=l}if(!i)return bs(t);const a=s[t],r=i[1].split(",").map(vu);return typeof a=="function"?a(r):r[a]}const bu=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return vs(n,t)};function vu(e){return parseFloat(e.trim())}const Mt=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Et=new Set(Mt),rr=e=>e===Ct||e===U,Tu=new Set(["x","y","z"]),wu=Mt.filter(e=>!Tu.has(e));function Su(e){const t=[];return wu.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const rt={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>vs(t,"x"),y:(e,{transform:t})=>vs(t,"y")};rt.translateX=rt.x;rt.translateY=rt.y;const ot=new Set;let Ts=!1,ws=!1,Ss=!1;function Wo(){if(ws){const e=Array.from(ot).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const i=Su(s);i.length&&(n.set(s,i),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const i=n.get(s);i&&i.forEach(([a,r])=>{var l;(l=s.getValue(a))==null||l.set(r)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}ws=!1,Ts=!1,ot.forEach(e=>e.complete(Ss)),ot.clear()}function zo(){ot.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(ws=!0)})}function Au(){Ss=!0,zo(),Wo(),Ss=!1}class si{constructor(t,n,s,i,a,r=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=i,this.element=a,this.isAsync=r}scheduleResolve(){this.state="scheduled",this.isAsync?(ot.add(this),Ts||(Ts=!0,ne.read(zo),ne.resolveKeyframes(Wo))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:i}=this;if(t[0]===null){const a=i==null?void 0:i.get(),r=t[t.length-1];if(a!==void 0)t[0]=a;else if(s&&n){const l=s.readValue(n,r);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=r),i&&a===void 0&&i.set(t[0])}gu(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ot.delete(this)}cancel(){this.state==="scheduled"&&(ot.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const ju=e=>e.startsWith("--");function Cu(e,t,n){ju(t)?e.style.setProperty(t,n):e.style[t]=n}const Mu=zs(()=>window.ScrollTimeline!==void 0),Eu={};function Pu(e,t){const n=zs(e);return()=>Eu[t]??n()}const $o=Pu(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ut=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,or={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ut([0,.65,.55,1]),circOut:Ut([.55,0,1,.45]),backIn:Ut([.31,.01,.66,-.59]),backOut:Ut([.33,1.53,.69,.99])};function Ko(e,t){if(e)return typeof e=="function"?$o()?Bo(e,t):"ease-out":Do(e)?Ut(e):Array.isArray(e)?e.map(n=>Ko(n,t)||or.easeOut):or[e]}function Du(e,t,n,{delay:s=0,duration:i=300,repeat:a=0,repeatType:r="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:n};c&&(d.offset=c);const h=Ko(l,i);Array.isArray(h)&&(d.easing=h);const f={delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:r==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function Go(e){return typeof e=="function"&&"applyToOptions"in e}function Ru({type:e,...t}){return Go(e)&&$o()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Nu extends ti{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:s,keyframes:i,pseudoElement:a,allowFlatten:r=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=r,this.options=t,wn(typeof t.type!="string");const u=Ru(t);this.animation=Du(n,s,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=ei(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):Cu(n,s,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,s;const t=((s=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:s.call(n).duration)||0;return Ne(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Ne(t)}get time(){return Ne(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ue(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&Mu()?(this.animation.timeline=t,ke):n(this)}}const Yo={anticipate:Co,backInOut:jo,circInOut:Eo};function ku(e){return e in Yo}function Lu(e){typeof e.ease=="string"&&ku(e.ease)&&(e.ease=Yo[e.ease])}const ar=10;class Vu extends Nu{constructor(t){Lu(t),Ho(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:s,onComplete:i,element:a,...r}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new ni({...r,autoplay:!1}),c=Ue(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-ar).value,l.sample(c).value,ar),l.stop()}}const lr=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ze.test(e)||e==="0")&&!e.startsWith("url("));function _u(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Ou(e,t,n,s){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],r=lr(i,t),l=lr(a,t);return!r||!l?!1:_u(e)||(n==="spring"||Go(n))&&s}function As(e){e.duration=0,e.type="keyframes"}const Iu=new Set(["opacity","clipPath","filter","transform"]),Fu=zs(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Bu(e){var d;const{motionValue:t,name:n,repeatDelay:s,repeatType:i,damping:a,type:r}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return Fu()&&n&&Iu.has(n)&&(n!=="transform"||!u)&&!c&&!s&&i!=="mirror"&&a!==0&&r!=="inertia"}const Uu=40;class Hu extends ti{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:r="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var y;super(),this.stop=()=>{var x,b;this._animation&&(this._animation.stop(),(x=this.stopTimeline)==null||x.call(this)),(b=this.keyframeResolver)==null||b.cancel()},this.createdAt=Pe.now();const f={autoplay:t,delay:n,type:s,repeat:i,repeatDelay:a,repeatType:r,name:c,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||si;this.keyframeResolver=new g(l,(x,b,v)=>this.onKeyframesResolved(x,b,f,!v),c,u,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,s,i){this.keyframeResolver=void 0;const{name:a,type:r,velocity:l,delay:c,isHandoff:u,onUpdate:d}=s;this.resolvedAt=Pe.now(),Ou(t,a,r,l)||((Ye.instantAnimations||!c)&&(d==null||d(ei(t,s,n))),t[0]=t[t.length-1],As(s),s.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>Uu?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...s,keyframes:t},g=!u&&Bu(f)?new Vu({...f,element:f.motionValue.owner.current}):new ni(f);g.finished.then(()=>this.notifyFinished()).catch(ke),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Au()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const Wu=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function zu(e){const t=Wu.exec(e);if(!t)return[,];const[,n,s,i]=t;return[`--${n??s}`,i]}function Xo(e,t,n=1){const[s,i]=zu(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const r=a.trim();return yo(r)?parseFloat(r):r}return Xs(i)?Xo(i,t,n+1):i}function ii(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const qo=new Set(["width","height","top","left","right","bottom",...Mt]),$u={test:e=>e==="auto",parse:e=>e},Zo=e=>t=>t.test(e),Jo=[Ct,U,He,Xe,_c,Vc,$u],cr=e=>Jo.find(Zo(e));function Ku(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||bo(e):!0}const Gu=new Set(["brightness","contrast","saturate","opacity"]);function Yu(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(qs)||[];if(!s)return e;const i=n.replace(s,"");let a=Gu.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+i+")"}const Xu=/\b([a-z-]*)\(.*?\)/gu,js={...Ze,getAnimatableNone:e=>{const t=e.match(Xu);return t?t.map(Yu).join(" "):e}},ur={...Ct,transform:Math.round},qu={rotate:Xe,rotateX:Xe,rotateY:Xe,rotateZ:Xe,scale:fn,scaleX:fn,scaleY:fn,scaleZ:fn,skew:Xe,skewX:Xe,skewY:Xe,distance:U,translateX:U,translateY:U,translateZ:U,x:U,y:U,z:U,perspective:U,transformPerspective:U,opacity:Gt,originX:Zi,originY:Zi,originZ:U},ri={borderWidth:U,borderTopWidth:U,borderRightWidth:U,borderBottomWidth:U,borderLeftWidth:U,borderRadius:U,radius:U,borderTopLeftRadius:U,borderTopRightRadius:U,borderBottomRightRadius:U,borderBottomLeftRadius:U,width:U,maxWidth:U,height:U,maxHeight:U,top:U,right:U,bottom:U,left:U,padding:U,paddingTop:U,paddingRight:U,paddingBottom:U,paddingLeft:U,margin:U,marginTop:U,marginRight:U,marginBottom:U,marginLeft:U,backgroundPositionX:U,backgroundPositionY:U,...qu,zIndex:ur,fillOpacity:Gt,strokeOpacity:Gt,numOctaves:ur},Zu={...ri,color:le,backgroundColor:le,outlineColor:le,fill:le,stroke:le,borderColor:le,borderTopColor:le,borderRightColor:le,borderBottomColor:le,borderLeftColor:le,filter:js,WebkitFilter:js},Qo=e=>Zu[e];function ea(e,t){let n=Qo(e);return n!==js&&(n=Ze),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ju=new Set(["auto","none","0"]);function Qu(e,t,n){let s=0,i;for(;s<e.length&&!i;){const a=e[s];typeof a=="string"&&!Ju.has(a)&&Yt(a).values.length&&(i=e[s]),s++}if(i&&n)for(const a of t)e[a]=ea(n,i)}class ed extends si{constructor(t,n,s,i,a){super(t,n,s,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Xs(u))){const d=Xo(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!qo.has(s)||t.length!==2)return;const[i,a]=t,r=cr(i),l=cr(a);if(r!==l)if(rr(r)&&rr(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else rt[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let i=0;i<t.length;i++)(t[i]===null||Ku(t[i]))&&s.push(i);s.length&&Qu(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rt[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(s,i).jump(i,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:s}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,r=s[a];s[a]=rt[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=r),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function td(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const i=document.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const ta=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function na(e){return xo(e)&&"offsetHeight"in e}const dr=30,nd=e=>!isNaN(parseFloat(e));class sd{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var a;const i=Pe.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const r of this.dependents)r.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Pe.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=nd(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $s);const s=this.events[t].add(n);return t==="change"?()=>{s(),ne.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Pe.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>dr)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,dr);return vo(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function St(e,t){return new sd(e,t)}const{schedule:oi,cancel:km}=Ro(queueMicrotask,!1),Ie={x:!1,y:!1};function sa(){return Ie.x||Ie.y}function id(e){return e==="x"||e==="y"?Ie[e]?null:(Ie[e]=!0,()=>{Ie[e]=!1}):Ie.x||Ie.y?null:(Ie.x=Ie.y=!0,()=>{Ie.x=Ie.y=!1})}function ia(e,t){const n=td(e),s=new AbortController,i={passive:!0,...t,signal:s.signal};return[n,i,()=>s.abort()]}function hr(e){return!(e.pointerType==="touch"||sa())}function rd(e,t,n={}){const[s,i,a]=ia(e,n),r=l=>{if(!hr(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{hr(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,i)};return s.forEach(l=>{l.addEventListener("pointerenter",r,i)}),a}const ra=(e,t)=>t?e===t?!0:ra(e,t.parentElement):!1,ai=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,od=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ad(e){return od.has(e.tagName)||e.tabIndex!==-1}const bn=new WeakSet;function fr(e){return t=>{t.key==="Enter"&&e(t)}}function es(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ld=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=fr(()=>{if(bn.has(n))return;es(n,"down");const i=fr(()=>{es(n,"up")}),a=()=>es(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function mr(e){return ai(e)&&!sa()}function cd(e,t,n={}){const[s,i,a]=ia(e,n),r=l=>{const c=l.currentTarget;if(!mr(l))return;bn.add(c);const u=t(c,l),d=(g,y)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),bn.has(c)&&bn.delete(c),mr(g)&&typeof u=="function"&&u(g,{success:y})},h=g=>{d(g,c===window||c===document||n.useGlobalTarget||ra(c,g.target))},f=g=>{d(g,!1)};window.addEventListener("pointerup",h,i),window.addEventListener("pointercancel",f,i)};return s.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",r,i),na(l)&&(l.addEventListener("focus",u=>ld(u,i)),!ad(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function oa(e){return xo(e)&&"ownerSVGElement"in e}function ud(e){return oa(e)&&e.tagName==="svg"}const be=e=>!!(e&&e.getVelocity),dd=[...Jo,le,Ze],hd=e=>dd.find(Zo(e)),li=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function pr(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function fd(...e){return t=>{let n=!1;const s=e.map(i=>{const a=pr(i,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<s.length;i++){const a=s[i];typeof a=="function"?a():pr(e[i],null)}}}}function md(...e){return p.useCallback(fd(...e),e)}class pd extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=n.offsetParent,i=na(s)&&s.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function gd({children:e,isPresent:t,anchorX:n,root:s}){const i=p.useId(),a=p.useRef(null),r=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(li),c=md(a,e==null?void 0:e.ref);return p.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:g}=r.current;if(t||!a.current||!u||!d)return;const y=n==="left"?`left: ${f}`:`right: ${g}`;a.current.dataset.motionPopId=i;const x=document.createElement("style");l&&(x.nonce=l);const b=s??document.head;return b.appendChild(x),x.sheet&&x.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${y}px !important;
            top: ${h}px !important;
          }
        `),()=>{b.contains(x)&&b.removeChild(x)}},[t]),o.jsx(pd,{isPresent:t,childRef:a,sizeRef:r,children:p.cloneElement(e,{ref:c})})}const yd=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:i,presenceAffectsLayout:a,mode:r,anchorX:l,root:c})=>{const u=Bs(xd),d=p.useId();let h=!0,f=p.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:n,custom:i,onExitComplete:g=>{u.set(g,!0);for(const y of u.values())if(!y)return;s&&s()},register:g=>(u.set(g,!1),()=>u.delete(g))}),[n,u,s]);return a&&h&&(f={...f}),p.useMemo(()=>{u.forEach((g,y)=>u.set(y,!1))},[n]),p.useEffect(()=>{!n&&!u.size&&s&&s()},[n]),r==="popLayout"&&(e=o.jsx(gd,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(Pn.Provider,{value:f,children:e})};function xd(){return new Map}function aa(e=!0){const t=p.useContext(Pn);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:i}=t,a=p.useId();p.useEffect(()=>{if(e)return i(a)},[e]);const r=p.useCallback(()=>e&&s&&s(a),[a,s,e]);return!n&&s?[!1,r]:[!0]}const mn=e=>e.key||"";function gr(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const bd=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:a="sync",propagate:r=!1,anchorX:l="left",root:c})=>{const[u,d]=aa(r),h=p.useMemo(()=>gr(e),[e]),f=r&&!u?[]:h.map(mn),g=p.useRef(!0),y=p.useRef(h),x=Bs(()=>new Map),[b,v]=p.useState(h),[E,w]=p.useState(h);go(()=>{g.current=!1,y.current=h;for(let N=0;N<E.length;N++){const _=mn(E[N]);f.includes(_)?x.delete(_):x.get(_)!==!0&&x.set(_,!1)}},[E,f.length,f.join("-")]);const S=[];if(h!==b){let N=[...h];for(let _=0;_<E.length;_++){const D=E[_],k=mn(D);f.includes(k)||(N.splice(_,0,D),S.push(D))}return a==="wait"&&S.length&&(N=S),w(gr(N)),v(h),null}const{forceRender:C}=p.useContext(Fs);return o.jsx(o.Fragment,{children:E.map(N=>{const _=mn(N),D=r&&!u?!1:h===E||f.includes(_),k=()=>{if(x.has(_))x.set(_,!0);else return;let M=!0;x.forEach(T=>{T||(M=!1)}),M&&(C==null||C(),w(y.current),r&&(d==null||d()),s&&s())};return o.jsx(yd,{isPresent:D,initial:!g.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:D?void 0:k,anchorX:l,children:N},_)})})},la=p.createContext({strict:!1}),yr={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},At={};for(const e in yr)At[e]={isEnabled:t=>yr[e].some(n=>!!t[n])};function vd(e){for(const t in e)At[t]={...At[t],...e[t]}}const Td=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cn(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Td.has(e)}let ca=e=>!Cn(e);function wd(e){typeof e=="function"&&(ca=t=>t.startsWith("on")?!Cn(t):e(t))}try{wd(require("@emotion/is-prop-valid").default)}catch{}function Sd(e,t,n){const s={};for(const i in e)i==="values"&&typeof e.values=="object"||(ca(i)||n===!0&&Cn(i)||!t&&!Cn(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}const Dn=p.createContext({});function Rn(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Xt(e){return typeof e=="string"||Array.isArray(e)}const ci=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ui=["initial",...ci];function Nn(e){return Rn(e.animate)||ui.some(t=>Xt(e[t]))}function ua(e){return!!(Nn(e)||e.variants)}function Ad(e,t){if(Nn(e)){const{initial:n,animate:s}=e;return{initial:n===!1||Xt(n)?n:void 0,animate:Xt(s)?s:void 0}}return e.inherit!==!1?t:{}}function jd(e){const{initial:t,animate:n}=Ad(e,p.useContext(Dn));return p.useMemo(()=>({initial:t,animate:n}),[xr(t),xr(n)])}function xr(e){return Array.isArray(e)?e.join(" "):e}const qt={};function Cd(e){for(const t in e)qt[t]=e[t],Ys(t)&&(qt[t].isCSSVariable=!0)}function da(e,{layout:t,layoutId:n}){return Et.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!qt[e]||e==="opacity")}const Md={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ed=Mt.length;function Pd(e,t,n){let s="",i=!0;for(let a=0;a<Ed;a++){const r=Mt[a],l=e[r];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(r.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=ta(l,ri[r]);if(!c){i=!1;const d=Md[r]||r;s+=`${d}(${u}) `}n&&(t[r]=u)}}return s=s.trim(),n?s=n(t,i?"":s):i&&(s="none"),s}function di(e,t,n){const{style:s,vars:i,transformOrigin:a}=e;let r=!1,l=!1;for(const c in t){const u=t[c];if(Et.has(c)){r=!0;continue}else if(Ys(c)){i[c]=u;continue}else{const d=ta(u,ri[c]);c.startsWith("origin")?(l=!0,a[c]=d):s[c]=d}}if(t.transform||(r||n?s.transform=Pd(t,e.transform,n):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=a;s.transformOrigin=`${c} ${u} ${d}`}}const hi=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ha(e,t,n){for(const s in t)!be(t[s])&&!da(s,n)&&(e[s]=t[s])}function Dd({transformTemplate:e},t){return p.useMemo(()=>{const n=hi();return di(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Rd(e,t){const n=e.style||{},s={};return ha(s,n,e),Object.assign(s,Dd(e,t)),s}function Nd(e,t){const n={},s=Rd(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}const kd={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ld={offset:"strokeDashoffset",array:"strokeDasharray"};function Vd(e,t,n=1,s=0,i=!0){e.pathLength=1;const a=i?kd:Ld;e[a.offset]=U.transform(-s);const r=U.transform(t),l=U.transform(n);e[a.array]=`${r} ${l}`}function fa(e,{attrX:t,attrY:n,attrScale:s,pathLength:i,pathSpacing:a=1,pathOffset:r=0,...l},c,u,d){if(di(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),s!==void 0&&(h.scale=s),i!==void 0&&Vd(h,i,a,r,!1)}const ma=()=>({...hi(),attrs:{}}),pa=e=>typeof e=="string"&&e.toLowerCase()==="svg";function _d(e,t,n,s){const i=p.useMemo(()=>{const a=ma();return fa(a,t,pa(s),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};ha(a,e.style,e),i.style={...a,...i.style}}return i}const Od=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fi(e){return typeof e!="string"||e.includes("-")?!1:!!(Od.indexOf(e)>-1||/[A-Z]/u.test(e))}function Id(e,t,n,{latestValues:s},i,a=!1){const l=(fi(e)?_d:Nd)(t,s,i,e),c=Sd(t,typeof e=="string",a),u=e!==p.Fragment?{...c,...l,ref:n}:{},{children:d}=t,h=p.useMemo(()=>be(d)?d.get():d,[d]);return p.createElement(e,{...u,children:h})}function br(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function mi(e,t,n,s){if(typeof t=="function"){const[i,a]=br(s);t=t(n!==void 0?n:e.custom,i,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,a]=br(s);t=t(n!==void 0?n:e.custom,i,a)}return t}function vn(e){return be(e)?e.get():e}function Fd({scrapeMotionValuesFromProps:e,createRenderState:t},n,s,i){return{latestValues:Bd(n,s,i,e),renderState:t()}}function Bd(e,t,n,s){const i={},a=s(e,{});for(const f in a)i[f]=vn(a[f]);let{initial:r,animate:l}=e;const c=Nn(e),u=ua(e);t&&u&&!c&&e.inherit!==!1&&(r===void 0&&(r=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||r===!1;const h=d?l:r;if(h&&typeof h!="boolean"&&!Rn(h)){const f=Array.isArray(h)?h:[h];for(let g=0;g<f.length;g++){const y=mi(e,f[g]);if(y){const{transitionEnd:x,transition:b,...v}=y;for(const E in v){let w=v[E];if(Array.isArray(w)){const S=d?w.length-1:0;w=w[S]}w!==null&&(i[E]=w)}for(const E in x)i[E]=x[E]}}}return i}const ga=e=>(t,n)=>{const s=p.useContext(Dn),i=p.useContext(Pn),a=()=>Fd(e,t,s,i);return n?a():Bs(a)};function pi(e,t,n){var a;const{style:s}=e,i={};for(const r in s)(be(s[r])||t.style&&be(t.style[r])||da(r,e)||((a=n==null?void 0:n.getValue(r))==null?void 0:a.liveStyle)!==void 0)&&(i[r]=s[r]);return i}const Ud=ga({scrapeMotionValuesFromProps:pi,createRenderState:hi});function ya(e,t,n){const s=pi(e,t,n);for(const i in e)if(be(e[i])||be(t[i])){const a=Mt.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[a]=e[i]}return s}const Hd=ga({scrapeMotionValuesFromProps:ya,createRenderState:ma}),Wd=Symbol.for("motionComponentSymbol");function yt(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function zd(e,t,n){return p.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):yt(n)&&(n.current=s))},[t])}const gi=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$d="framerAppearId",xa="data-"+gi($d),ba=p.createContext({});function Kd(e,t,n,s,i){var x,b;const{visualElement:a}=p.useContext(Dn),r=p.useContext(la),l=p.useContext(Pn),c=p.useContext(li).reducedMotion,u=p.useRef(null);s=s||r.renderer,!u.current&&s&&(u.current=s(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=p.useContext(ba);d&&!d.projection&&i&&(d.type==="html"||d.type==="svg")&&Gd(u.current,n,i,h);const f=p.useRef(!1);p.useInsertionEffect(()=>{d&&f.current&&d.update(n,l)});const g=n[xa],y=p.useRef(!!g&&!((x=window.MotionHandoffIsComplete)!=null&&x.call(window,g))&&((b=window.MotionHasOptimisedAnimation)==null?void 0:b.call(window,g)));return go(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,g)}),y.current=!1),d.enteringChildren=void 0)}),d}function Gd(e,t,n,s){const{layoutId:i,layout:a,drag:r,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:va(e.parent)),e.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!r||l&&yt(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:c,layoutRoot:u})}function va(e){if(e)return e.options.allowProjection!==!1?e.projection:va(e.parent)}function ts(e,{forwardMotionProps:t=!1}={},n,s){n&&vd(n);const i=fi(e)?Hd:Ud;function a(l,c){let u;const d={...p.useContext(li),...l,layoutId:Yd(l)},{isStatic:h}=d,f=jd(l),g=i(l,h);if(!h&&Us){Xd();const y=qd(d);u=y.MeasureLayout,f.visualElement=Kd(e,g,d,s,y.ProjectionNode)}return o.jsxs(Dn.Provider,{value:f,children:[u&&f.visualElement?o.jsx(u,{visualElement:f.visualElement,...d}):null,Id(e,l,zd(g,f.visualElement,c),g,h,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const r=p.forwardRef(a);return r[Wd]=e,r}function Yd({layoutId:e}){const t=p.useContext(Fs).id;return t&&e!==void 0?t+"-"+e:e}function Xd(e,t){p.useContext(la).strict}function qd(e){const{drag:t,layout:n}=At;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function Zd(e,t){if(typeof Proxy>"u")return ts;const n=new Map,s=(a,r)=>ts(a,r,e,t),i=(a,r)=>s(a,r);return new Proxy(i,{get:(a,r)=>r==="create"?s:(n.has(r)||n.set(r,ts(r,void 0,e,t)),n.get(r))})}function Ta({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function Jd({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Qd(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function ns(e){return e===void 0||e===1}function Cs({scale:e,scaleX:t,scaleY:n}){return!ns(e)||!ns(t)||!ns(n)}function nt(e){return Cs(e)||wa(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function wa(e){return vr(e.x)||vr(e.y)}function vr(e){return e&&e!=="0%"}function Mn(e,t,n){const s=e-n,i=t*s;return n+i}function Tr(e,t,n,s,i){return i!==void 0&&(e=Mn(e,i,s)),Mn(e,n,s)+t}function Ms(e,t=0,n=1,s,i){e.min=Tr(e.min,t,n,s,i),e.max=Tr(e.max,t,n,s,i)}function Sa(e,{x:t,y:n}){Ms(e.x,t.translate,t.scale,t.originPoint),Ms(e.y,n.translate,n.scale,n.originPoint)}const wr=.999999999999,Sr=1.0000000000001;function eh(e,t,n,s=!1){const i=n.length;if(!i)return;t.x=t.y=1;let a,r;for(let l=0;l<i;l++){a=n[l],r=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&bt(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),r&&(t.x*=r.x.scale,t.y*=r.y.scale,Sa(e,r)),s&&nt(a.latestValues)&&bt(e,a.latestValues))}t.x<Sr&&t.x>wr&&(t.x=1),t.y<Sr&&t.y>wr&&(t.y=1)}function xt(e,t){e.min=e.min+t,e.max=e.max+t}function Ar(e,t,n,s,i=.5){const a=se(e.min,e.max,i);Ms(e,t,n,a,s)}function bt(e,t){Ar(e.x,t.x,t.scaleX,t.scale,t.originX),Ar(e.y,t.y,t.scaleY,t.scale,t.originY)}function Aa(e,t){return Ta(Qd(e.getBoundingClientRect(),t))}function th(e,t,n){const s=Aa(e,n),{scroll:i}=t;return i&&(xt(s.x,i.offset.x),xt(s.y,i.offset.y)),s}const jr=()=>({translate:0,scale:1,origin:0,originPoint:0}),vt=()=>({x:jr(),y:jr()}),Cr=()=>({min:0,max:0}),ue=()=>({x:Cr(),y:Cr()}),Es={current:null},ja={current:!1};function nh(){if(ja.current=!0,!!Us)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Es.current=e.matches;e.addEventListener("change",t),t()}else Es.current=!1}const sh=new WeakMap;function ih(e,t,n){for(const s in t){const i=t[s],a=n[s];if(be(i))e.addValue(s,i);else if(be(a))e.addValue(s,St(i,{owner:e}));else if(a!==i)if(e.hasValue(s)){const r=e.getValue(s);r.liveStyle===!0?r.jump(i):r.hasAnimated||r.set(i)}else{const r=e.getStaticValue(s);e.addValue(s,St(r!==void 0?r:i,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const Mr=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rh{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:a,visualState:r},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=si,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Pe.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,ne.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=r;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Nn(n),this.isVariantNode=ua(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const g=h[f];c[f]!==void 0&&be(g)&&g.set(c[f])}}mount(t){var n;this.current=t,sh.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),ja.current||nh(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Es.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),qe(this.notifyUpdate),qe(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const s=this.features[n];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Et.has(t);s&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",r=>{this.latestValues[t]=r,this.props.onUpdate&&ne.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in At){const n=At[t];if(!n)continue;const{isEnabled:s,Feature:i}=n;if(!this.features[t]&&i&&s(this.props)&&(this.features[t]=new i(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ue()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<Mr.length;s++){const i=Mr[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,r=t[a];r&&(this.propEventSubscriptions[i]=this.on(i,r))}this.prevMotionValues=ih(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=St(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(yo(s)||bo(s))?s=parseFloat(s):!hd(s)&&Ze.test(n)&&(s=ea(t,n)),this.setBaseTarget(t,be(s)?s.get():s)),be(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let s;if(typeof n=="string"||typeof n=="object"){const r=mi(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);r&&(s=r[t])}if(n&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!be(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $s),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){oi.render(this.render)}}class Ca extends rh{constructor(){super(...arguments),this.KeyframeResolver=ed}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;be(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Ma(e,{style:t,vars:n},s,i){const a=e.style;let r;for(r in t)a[r]=t[r];i==null||i.applyProjectionStyles(a,s);for(r in n)a.setProperty(r,n[r])}function oh(e){return window.getComputedStyle(e)}class ah extends Ca{constructor(){super(...arguments),this.type="html",this.renderInstance=Ma}readValueFromInstance(t,n){var s;if(Et.has(n))return(s=this.projection)!=null&&s.isProjecting?bs(n):bu(t,n);{const i=oh(t),a=(Ys(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Aa(t,n)}build(t,n,s){di(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return pi(t,n,s)}}const Ea=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function lh(e,t,n,s){Ma(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(Ea.has(i)?i:gi(i),t.attrs[i])}class ch extends Ca{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ue}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Et.has(n)){const s=Qo(n);return s&&s.default||0}return n=Ea.has(n)?n:gi(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return ya(t,n,s)}build(t,n,s){fa(t,n,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(t,n,s,i){lh(t,n,s,i)}mount(t){this.isSVGTag=pa(t.tagName),super.mount(t)}}const uh=(e,t)=>fi(e)?new ch(t):new ah(t,{allowProjection:e!==p.Fragment});function Tt(e,t,n){const s=e.getProps();return mi(s,t,n!==void 0?n:s.custom,e)}const Ps=e=>Array.isArray(e);function dh(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,St(n))}function hh(e){return Ps(e)?e[e.length-1]||0:e}function fh(e,t){const n=Tt(e,t);let{transitionEnd:s={},transition:i={},...a}=n||{};a={...a,...s};for(const r in a){const l=hh(a[r]);dh(e,r,l)}}function mh(e){return!!(be(e)&&e.add)}function Ds(e,t){const n=e.getValue("willChange");if(mh(n))return n.add(t);if(!n&&Ye.WillChange){const s=new Ye.WillChange("auto");e.addValue("willChange",s),s.add(t)}}function Pa(e){return e.props[xa]}const ph=e=>e!==null;function gh(e,{repeat:t,repeatType:n="loop"},s){const i=e.filter(ph),a=t&&n!=="loop"&&t%2===1?0:i.length-1;return!a||s===void 0?i[a]:s}const yh={type:"spring",stiffness:500,damping:25,restSpeed:10},xh=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),bh={type:"keyframes",duration:.8},vh={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Th=(e,{keyframes:t})=>t.length>2?bh:Et.has(e)?e.startsWith("scale")?xh(t[1]):yh:vh;function wh({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:i,repeat:a,repeatType:r,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const yi=(e,t,n,s={},i,a)=>r=>{const l=ii(s,e)||{},c=l.delay||s.delay||0;let{elapsed:u=0}=s;u=u-Ue(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{r(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:i};wh(l)||Object.assign(d,Th(e,d)),d.duration&&(d.duration=Ue(d.duration)),d.repeatDelay&&(d.repeatDelay=Ue(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(As(d),d.delay===0&&(h=!0)),(Ye.instantAnimations||Ye.skipAnimations)&&(h=!0,As(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!a&&t.get()!==void 0){const f=gh(d.keyframes,l);if(f!==void 0){ne.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new ni(d):new Hu(d)};function Sh({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function Da(e,t,{delay:n=0,transitionOverride:s,type:i}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:r,...l}=t;s&&(a=s);const c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&Sh(u,d))continue;const g={delay:n,...ii(a||{},d)},y=h.get();if(y!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===y&&!g.velocity)continue;let x=!1;if(window.MotionHandoffAnimation){const v=Pa(e);if(v){const E=window.MotionHandoffAnimation(v,d,ne);E!==null&&(g.startTime=E,x=!0)}}Ds(e,d),h.start(yi(d,h,f,e.shouldReduceMotion&&qo.has(d)?{type:!1}:g,e,x));const b=h.animation;b&&c.push(b)}return r&&Promise.all(c).then(()=>{ne.update(()=>{r&&fh(e,r)})}),c}function Ra(e,t,n,s=0,i=1){const a=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),r=e.size,l=(r-1)*s;return typeof n=="function"?n(a,r):i===1?a*s:l-a*s}function Rs(e,t,n={}){var c;const s=Tt(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(Da(e,s,n)):()=>Promise.resolve(),r=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=i;return Ah(e,t,u,d,h,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[a,r]:[r,a];return u().then(()=>d())}else return Promise.all([a(),r(n.delay)])}function Ah(e,t,n=0,s=0,i=0,a=1,r){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Rs(c,t,{...r,delay:n+(typeof s=="function"?0:s)+Ra(e.variantChildren,c,s,i,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function jh(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const i=t.map(a=>Rs(e,a,n));s=Promise.all(i)}else if(typeof t=="string")s=Rs(e,t,n);else{const i=typeof t=="function"?Tt(e,t,n.custom):t;s=Promise.all(Da(e,i,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}function Na(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}const Ch=ui.length;function ka(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?ka(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Ch;n++){const s=ui[n],i=e.props[s];(Xt(i)||i===!1)&&(t[s]=i)}return t}const Mh=[...ci].reverse(),Eh=ci.length;function Ph(e){return t=>Promise.all(t.map(({animation:n,options:s})=>jh(e,n,s)))}function Dh(e){let t=Ph(e),n=Er(),s=!0;const i=c=>(u,d)=>{var f;const h=Tt(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:g,transitionEnd:y,...x}=h;u={...u,...x,...y}}return u};function a(c){t=c(e)}function r(c){const{props:u}=e,d=ka(e.parent)||{},h=[],f=new Set;let g={},y=1/0;for(let b=0;b<Eh;b++){const v=Mh[b],E=n[v],w=u[v]!==void 0?u[v]:d[v],S=Xt(w),C=v===c?E.isActive:null;C===!1&&(y=b);let N=w===d[v]&&w!==u[v]&&S;if(N&&s&&e.manuallyAnimateOnMount&&(N=!1),E.protectedKeys={...g},!E.isActive&&C===null||!w&&!E.prevProp||Rn(w)||typeof w=="boolean")continue;const _=Rh(E.prevProp,w);let D=_||v===c&&E.isActive&&!N&&S||b>y&&S,k=!1;const M=Array.isArray(w)?w:[w];let T=M.reduce(i(v),{});C===!1&&(T={});const{prevResolvedValues:O={}}=E,W={...O,...T},ce=z=>{D=!0,f.has(z)&&(k=!0,f.delete(z)),E.needsAnimating[z]=!0;const G=e.getValue(z);G&&(G.liveStyle=!1)};for(const z in W){const G=T[z],oe=O[z];if(g.hasOwnProperty(z))continue;let ye=!1;Ps(G)&&Ps(oe)?ye=!Na(G,oe):ye=G!==oe,ye?G!=null?ce(z):f.add(z):G!==void 0&&f.has(z)?ce(z):E.protectedKeys[z]=!0}E.prevProp=w,E.prevResolvedValues=T,E.isActive&&(g={...g,...T}),s&&e.blockInitialAnimation&&(D=!1);const Z=N&&_;D&&(!Z||k)&&h.push(...M.map(z=>{const G={type:v};if(typeof z=="string"&&s&&!Z&&e.manuallyAnimateOnMount&&e.parent){const{parent:oe}=e,ye=Tt(oe,z);if(oe.enteringChildren&&ye){const{delayChildren:Y}=ye.transition||{};G.delay=Ra(oe.enteringChildren,e,Y)}}return{animation:z,options:G}}))}if(f.size){const b={};if(typeof u.initial!="boolean"){const v=Tt(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(b.transition=v.transition)}f.forEach(v=>{const E=e.getBaseTarget(v),w=e.getValue(v);w&&(w.liveStyle=!0),b[v]=E??null}),h.push({animation:b})}let x=!!h.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(h):Promise.resolve()}function l(c,u){var h;if(n[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var g;return(g=f.animationState)==null?void 0:g.setActive(c,u)}),n[c].isActive=u;const d=r(c);for(const f in n)n[f].protectedKeys={};return d}return{animateChanges:r,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Er()}}}function Rh(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Na(t,e):!1}function tt(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Er(){return{animate:tt(!0),whileInView:tt(),whileHover:tt(),whileTap:tt(),whileDrag:tt(),whileFocus:tt(),exit:tt()}}class Je{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Nh extends Je{constructor(t){super(t),t.animationState||(t.animationState=Dh(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Rn(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let kh=0;class Lh extends Je{constructor(){super(...arguments),this.id=kh++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Vh={animation:{Feature:Nh},exit:{Feature:Lh}};function Zt(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function nn(e){return{point:{x:e.pageX,y:e.pageY}}}const _h=e=>t=>ai(t)&&e(t,nn(t));function zt(e,t,n,s){return Zt(e,t,_h(n),s)}const La=1e-4,Oh=1-La,Ih=1+La,Va=.01,Fh=0-Va,Bh=0+Va;function we(e){return e.max-e.min}function Uh(e,t,n){return Math.abs(e-t)<=n}function Pr(e,t,n,s=.5){e.origin=s,e.originPoint=se(t.min,t.max,e.origin),e.scale=we(n)/we(t),e.translate=se(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Oh&&e.scale<=Ih||isNaN(e.scale))&&(e.scale=1),(e.translate>=Fh&&e.translate<=Bh||isNaN(e.translate))&&(e.translate=0)}function $t(e,t,n,s){Pr(e.x,t.x,n.x,s?s.originX:void 0),Pr(e.y,t.y,n.y,s?s.originY:void 0)}function Dr(e,t,n){e.min=n.min+t.min,e.max=e.min+we(t)}function Hh(e,t,n){Dr(e.x,t.x,n.x),Dr(e.y,t.y,n.y)}function Rr(e,t,n){e.min=t.min-n.min,e.max=e.min+we(t)}function En(e,t,n){Rr(e.x,t.x,n.x),Rr(e.y,t.y,n.y)}function Re(e){return[e("x"),e("y")]}const _a=({current:e})=>e?e.ownerDocument.defaultView:null,Nr=(e,t)=>Math.abs(e-t);function Wh(e,t){const n=Nr(e.x,t.x),s=Nr(e.y,t.y);return Math.sqrt(n**2+s**2)}class Oa{constructor(t,n,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:r=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=is(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=Wh(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!y)return;const{point:x}=f,{timestamp:b}=pe;this.history.push({...x,timestamp:b});const{onStart:v,onMove:E}=this.handlers;g||(v&&v(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,g)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ss(g,this.transformPagePoint),ne.update(this.updatePoint,!0)},this.handlePointerUp=(f,g)=>{this.end();const{onEnd:y,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=is(f.type==="pointercancel"?this.lastMoveEventInfo:ss(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,v),x&&x(f,v)},!ai(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=s,this.distanceThreshold=r,this.contextWindow=i||window;const l=nn(t),c=ss(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=pe;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=n;h&&h(t,is(c,this.history)),this.removeListeners=Qt(zt(this.contextWindow,"pointermove",this.handlePointerMove),zt(this.contextWindow,"pointerup",this.handlePointerUp),zt(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),qe(this.updatePoint)}}function ss(e,t){return t?{point:t(e.point)}:e}function kr(e,t){return{x:e.x-t.x,y:e.y-t.y}}function is({point:e},t){return{point:e,delta:kr(e,Ia(t)),offset:kr(e,zh(t)),velocity:$h(t,.1)}}function zh(e){return e[0]}function Ia(e){return e[e.length-1]}function $h(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const i=Ia(e);for(;n>=0&&(s=e[n],!(i.timestamp-s.timestamp>Ue(t)));)n--;if(!s)return{x:0,y:0};const a=Ne(i.timestamp-s.timestamp);if(a===0)return{x:0,y:0};const r={x:(i.x-s.x)/a,y:(i.y-s.y)/a};return r.x===1/0&&(r.x=0),r.y===1/0&&(r.y=0),r}function Kh(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?se(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?se(n,e,s.max):Math.min(e,n)),e}function Lr(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function Gh(e,{top:t,left:n,bottom:s,right:i}){return{x:Lr(e.x,n,i),y:Lr(e.y,t,s)}}function Vr(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function Yh(e,t){return{x:Vr(e.x,t.x),y:Vr(e.y,t.y)}}function Xh(e,t){let n=.5;const s=we(e),i=we(t);return i>s?n=Kt(t.min,t.max-s,e.min):s>i&&(n=Kt(e.min,e.max-i,t.min)),Ge(0,1,n)}function qh(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Ns=.35;function Zh(e=Ns){return e===!1?e=0:e===!0&&(e=Ns),{x:_r(e,"left","right"),y:_r(e,"top","bottom")}}function _r(e,t,n){return{min:Or(e,t),max:Or(e,n)}}function Or(e,t){return typeof e=="number"?e:e[t]||0}const Jh=new WeakMap;class Qh{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ue(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nn(h).point)},r=(h,f)=>{const{drag:g,dragPropagation:y,onDragStart:x}=this.getProps();if(g&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=id(g),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Re(v=>{let E=this.getAxisMotionValue(v).get()||0;if(He.test(E)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[v];S&&(E=we(S)*(parseFloat(E)/100))}}this.originPoint[v]=E}),x&&ne.postRender(()=>x(h,f)),Ds(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:x,onDrag:b}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:v}=f;if(y&&this.currentDirection===null){this.currentDirection=ef(v),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,v),this.updateAxis("y",f.point,v),this.visualElement.render(),b&&b(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Re(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new Oa(t,{onSessionStart:a,onStart:r,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:s,contextWindow:_a(this.visualElement)})}stop(t,n){const s=t||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!s)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:l}=this.getProps();l&&ne.postRender(()=>l(s,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:i}=this.getProps();if(!s||!pn(t,i,this.currentDirection))return;const a=this.getAxisMotionValue(t);let r=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(r=Kh(r,this.constraints[t],this.elastic[t])),a.set(r)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;t&&yt(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=Gh(s.layoutBox,t):this.constraints=!1,this.elastic=Zh(n),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Re(r=>{this.constraints!==!1&&this.getAxisMotionValue(r)&&(this.constraints[r]=qh(s.layoutBox[r],this.constraints[r]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!yt(t))return!1;const s=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=th(s,i.root,this.visualElement.getTransformPagePoint());let r=Yh(i.layout.layoutBox,a);if(n){const l=n(Jd(r));this.hasMutatedConstraints=!!l,l&&(r=Ta(l))}return r}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:i,dragTransition:a,dragSnapToOrigin:r,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Re(d=>{if(!pn(d,n,this.currentDirection))return;let h=c&&c[d]||{};r&&(h={min:0,max:0});const f=i?200:1e6,g=i?40:1e7,y={type:"inertia",velocity:s?t[d]:0,bounceStiffness:f,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...a,...h};return this.startAxisValueAnimation(d,y)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return Ds(this.visualElement,t),s.start(yi(t,s,0,n,this.visualElement,!1))}stopAnimation(){Re(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Re(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),i=s[n];return i||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){Re(n=>{const{drag:s}=this.getProps();if(!pn(n,s,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:r,max:l}=i.layout.layoutBox[n];a.set(t[n]-se(r,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!yt(n)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Re(r=>{const l=this.getAxisMotionValue(r);if(l&&this.constraints!==!1){const c=l.get();i[r]=Xh({min:c,max:c},this.constraints[r])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),Re(r=>{if(!pn(r,t,null))return;const l=this.getAxisMotionValue(r),{min:c,max:u}=this.constraints[r];l.set(se(c,u,i[r]))})}addListeners(){if(!this.visualElement.current)return;Jh.set(this.visualElement,this);const t=this.visualElement.current,n=zt(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();yt(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ne.read(s);const r=Zt(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Re(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{r(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:r=Ns,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:i,dragConstraints:a,dragElastic:r,dragMomentum:l}}}function pn(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ef(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class tf extends Je{constructor(t){super(t),this.removeGroupControls=ke,this.removeListeners=ke,this.controls=new Qh(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ke}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ir=e=>(t,n)=>{e&&ne.postRender(()=>e(t,n))};class nf extends Je{constructor(){super(...arguments),this.removePointerDownListener=ke}onPointerDown(t){this.session=new Oa(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_a(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ir(t),onStart:Ir(n),onMove:s,onEnd:(a,r)=>{delete this.session,i&&ne.postRender(()=>i(a,r))}}}mount(){this.removePointerDownListener=zt(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Tn={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fr(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Bt={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(U.test(e))e=parseFloat(e);else return e;const n=Fr(e,t.target.x),s=Fr(e,t.target.y);return`${n}% ${s}%`}},sf={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,i=Ze.parse(e);if(i.length>5)return s;const a=Ze.createTransformer(e),r=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+r]/=l,i[1+r]/=c;const u=se(l,c,.5);return typeof i[2+r]=="number"&&(i[2+r]/=u),typeof i[3+r]=="number"&&(i[3+r]/=u),a(i)}};let rs=!1;class rf extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:i}=this.props,{projection:a}=t;Cd(of),a&&(n.group&&n.group.add(a),s&&s.register&&i&&s.register(a),rs&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Tn.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:i,isPresent:a}=this.props,{projection:r}=s;return r&&(r.isPresent=a,rs=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==a?r.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?r.promote():r.relegate()||ne.postRender(()=>{const l=r.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),oi.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:i}=t;rs=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Fa(e){const[t,n]=aa(),s=p.useContext(Fs);return o.jsx(rf,{...e,layoutGroup:s,switchLayoutGroup:p.useContext(ba),isPresent:t,safeToRemove:n})}const of={borderRadius:{...Bt,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bt,borderTopRightRadius:Bt,borderBottomLeftRadius:Bt,borderBottomRightRadius:Bt,boxShadow:sf};function af(e,t,n){const s=be(e)?e:St(e);return s.start(yi("",s,t,n)),s.animation}const lf=(e,t)=>e.depth-t.depth;class cf{constructor(){this.children=[],this.isDirty=!1}add(t){Hs(this.children,t),this.isDirty=!0}remove(t){Ws(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(lf),this.isDirty=!1,this.children.forEach(t)}}function uf(e,t){const n=Pe.now(),s=({timestamp:i})=>{const a=i-n;a>=t&&(qe(s),e(a-t))};return ne.setup(s,!0),()=>qe(s)}const Ba=["TopLeft","TopRight","BottomLeft","BottomRight"],df=Ba.length,Br=e=>typeof e=="string"?parseFloat(e):e,Ur=e=>typeof e=="number"||U.test(e);function hf(e,t,n,s,i,a){i?(e.opacity=se(0,n.opacity??1,ff(s)),e.opacityExit=se(t.opacity??1,0,mf(s))):a&&(e.opacity=se(t.opacity??1,n.opacity??1,s));for(let r=0;r<df;r++){const l=`border${Ba[r]}Radius`;let c=Hr(t,l),u=Hr(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Ur(c)===Ur(u)?(e[l]=Math.max(se(Br(c),Br(u),s),0),(He.test(u)||He.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=se(t.rotate||0,n.rotate||0,s))}function Hr(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const ff=Ua(0,.5,Mo),mf=Ua(.5,.95,ke);function Ua(e,t,n){return s=>s<e?0:s>t?1:n(Kt(e,t,s))}function Wr(e,t){e.min=t.min,e.max=t.max}function _e(e,t){Wr(e.x,t.x),Wr(e.y,t.y)}function zr(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function $r(e,t,n,s,i){return e-=t,e=Mn(e,1/n,s),i!==void 0&&(e=Mn(e,1/i,s)),e}function pf(e,t=0,n=1,s=.5,i,a=e,r=e){if(He.test(t)&&(t=parseFloat(t),t=se(r.min,r.max,t/100)-r.min),typeof t!="number")return;let l=se(a.min,a.max,s);e===a&&(l-=t),e.min=$r(e.min,t,n,l,i),e.max=$r(e.max,t,n,l,i)}function Kr(e,t,[n,s,i],a,r){pf(e,t[n],t[s],t[i],t.scale,a,r)}const gf=["x","scaleX","originX"],yf=["y","scaleY","originY"];function Gr(e,t,n,s){Kr(e.x,t,gf,n?n.x:void 0,s?s.x:void 0),Kr(e.y,t,yf,n?n.y:void 0,s?s.y:void 0)}function Yr(e){return e.translate===0&&e.scale===1}function Ha(e){return Yr(e.x)&&Yr(e.y)}function Xr(e,t){return e.min===t.min&&e.max===t.max}function xf(e,t){return Xr(e.x,t.x)&&Xr(e.y,t.y)}function qr(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Wa(e,t){return qr(e.x,t.x)&&qr(e.y,t.y)}function Zr(e){return we(e.x)/we(e.y)}function Jr(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class bf{constructor(){this.members=[]}add(t){Hs(this.members,t),t.scheduleRender()}remove(t){if(Ws(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let s;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){s=a;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function vf(e,t,n){let s="";const i=e.x.translate/t.x,a=e.y.translate/t.y,r=(n==null?void 0:n.z)||0;if((i||a||r)&&(s=`translate3d(${i}px, ${a}px, ${r}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:g,skewY:y}=n;u&&(s=`perspective(${u}px) ${s}`),d&&(s+=`rotate(${d}deg) `),h&&(s+=`rotateX(${h}deg) `),f&&(s+=`rotateY(${f}deg) `),g&&(s+=`skewX(${g}deg) `),y&&(s+=`skewY(${y}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const os=["","X","Y","Z"],Tf=1e3;let wf=0;function as(e,t,n,s){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function za(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Pa(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ne,!(i||a))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&za(s)}function $a({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(r={},l=t==null?void 0:t()){this.id=wf++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(jf),this.nodes.forEach(Pf),this.nodes.forEach(Df),this.nodes.forEach(Cf)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=r,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new cf)}addEventListener(r,l){return this.eventHandlers.has(r)||this.eventHandlers.set(r,new $s),this.eventHandlers.get(r).add(l)}notifyListeners(r,...l){const c=this.eventHandlers.get(r);c&&c.notify(...l)}hasListeners(r){return this.eventHandlers.has(r)}mount(r){if(this.instance)return;this.isSVG=oa(r)&&!ud(r),this.instance=r;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(r),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;ne.read(()=>{h=window.innerWidth}),e(r,()=>{const g=window.innerWidth;g!==h&&(h=g,this.root.updateBlockedByResize=!0,d&&d(),d=uf(f,250),Tn.hasAnimatedSinceResize&&(Tn.hasAnimatedSinceResize=!1,this.nodes.forEach(to)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||u.getDefaultTransition()||Vf,{onLayoutAnimationStart:x,onLayoutAnimationComplete:b}=u.getProps(),v=!this.targetLayout||!Wa(this.targetLayout,g),E=!h&&f;if(this.options.layoutRoot||this.resumeFrom||E||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...ii(y,"layout"),onPlay:x,onComplete:b};(u.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(d,E)}else h||to(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const r=this.getStack();r&&r.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qe(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rf),this.animationId++)}getTransformTemplate(){const{visualElement:r}=this.options;return r&&r.getProps().transformTemplate}willUpdate(r=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&za(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),r&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qr);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(eo);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(Ef),this.nodes.forEach(Sf),this.nodes.forEach(Af)):this.nodes.forEach(eo),this.clearAllSnapshots();const l=Pe.now();pe.delta=Ge(0,1e3/60,l-pe.timestamp),pe.timestamp=l,pe.isProcessing=!0,Xn.update.process(pe),Xn.preRender.process(pe),Xn.render.process(pe),pe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,oi.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mf),this.sharedNodes.forEach(Nf)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ne.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ne.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!we(this.snapshot.measuredBox.x)&&!we(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const r=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(r="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===r&&(l=!1),l&&this.instance){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:r,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const r=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Ha(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;r&&this.instance&&(l||nt(this.latestValues)||d)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(r=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return r&&(c=this.removeTransform(c)),_f(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:r}=this.options;if(!r)return ue();const l=r.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Of))){const{scroll:d}=this.root;d&&(xt(l.x,d.offset.x),xt(l.y,d.offset.y))}return l}removeElementScroll(r){var c;const l=ue();if(_e(l,r),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&_e(l,r),xt(l.x,h.offset.x),xt(l.y,h.offset.y))}return l}applyTransform(r,l=!1){const c=ue();_e(c,r);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&bt(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),nt(d.latestValues)&&bt(c,d.latestValues)}return nt(this.latestValues)&&bt(c,this.latestValues),c}removeTransform(r){const l=ue();_e(l,r);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!nt(u.latestValues))continue;Cs(u.latestValues)&&u.updateSnapshot();const d=ue(),h=u.measurePageBox();_e(d,h),Gr(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return nt(this.latestValues)&&Gr(l,this.latestValues),l}setTargetDelta(r){this.targetDelta=r,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(r){this.options={...this.options,...r,crossfade:r.crossfade!==void 0?r.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(r=!1){var g;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(r||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(g=this.parent)!=null&&g.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!this.layout||!(d||h))return;this.resolvedRelativeTargetAt=pe.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ue(),this.targetWithTransforms=ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Hh(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):_e(this.target,this.layout.layoutBox),Sa(this.target,this.targetDelta)):_e(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Cs(this.parent.latestValues)||wa(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(r,l,c){this.relativeParent=r,this.linkedParentVersion=r.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ue(),this.relativeTargetOrigin=ue(),En(this.relativeTargetOrigin,l,c),_e(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var y;const r=this.getLead(),l=!!this.resumingFrom||this!==r;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===pe.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;_e(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;eh(this.layoutCorrected,this.treeScale,this.path,l),r.layout&&!r.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(r.target=r.layout.layoutBox,r.targetWithTransforms=ue());const{target:g}=r;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(zr(this.prevProjectionDelta.x,this.projectionDelta.x),zr(this.prevProjectionDelta.y,this.projectionDelta.y)),$t(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Jr(this.projectionDelta.x,this.prevProjectionDelta.x)||!Jr(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(r=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),r){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vt(),this.projectionDelta=vt(),this.projectionDeltaWithTransform=vt()}setAnimationOrigin(r,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=vt();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ue(),g=c?c.source:void 0,y=this.layout?this.layout.source:void 0,x=g!==y,b=this.getStack(),v=!b||b.members.length<=1,E=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(Lf));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const C=S/1e3;no(h.x,r.x,C),no(h.y,r.y,C),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(En(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kf(this.relativeTarget,this.relativeTargetOrigin,f,C),w&&xf(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ue()),_e(w,this.relativeTarget)),x&&(this.animationValues=d,hf(d,u,this.latestValues,C,E,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(r){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(qe(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ne.update(()=>{Tn.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=St(0)),this.currentAnimation=af(this.motionValue,[0,1e3],{...r,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),r.onUpdate&&r.onUpdate(d)},onStop:()=>{},onComplete:()=>{r.onComplete&&r.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const r=this.getStack();r&&r.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Tf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const r=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=r;if(!(!l||!c||!u)){if(this!==r&&this.layout&&u&&Ka(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ue();const h=we(this.layout.layoutBox.x);c.x.min=r.target.x.min,c.x.max=c.x.min+h;const f=we(this.layout.layoutBox.y);c.y.min=r.target.y.min,c.y.max=c.y.min+f}_e(l,c),bt(l,d),$t(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(r,l){this.sharedNodes.has(r)||this.sharedNodes.set(r,new bf),this.sharedNodes.get(r).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const r=this.getStack();return r?r.lead===this:!0}getLead(){var l;const{layoutId:r}=this.options;return r?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:r}=this.options;return r?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:r}=this.options;if(r)return this.root.sharedNodes.get(r)}promote({needsReset:r,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),r&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const r=this.getStack();return r?r.relegate(this):!1}resetSkewAndRotation(){const{visualElement:r}=this.options;if(!r)return;let l=!1;const{latestValues:c}=r;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&as("z",r,u,this.animationValues);for(let d=0;d<os.length;d++)as(`rotate${os[d]}`,r,u,this.animationValues),as(`skew${os[d]}`,r,u,this.animationValues);r.render();for(const d in u)r.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);r.scheduleRender()}applyProjectionStyles(r,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){r.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,r.visibility="",r.opacity="",r.pointerEvents=vn(l==null?void 0:l.pointerEvents)||"",r.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(r.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,r.pointerEvents=vn(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!nt(this.latestValues)&&(r.transform=c?c({},""):"none",this.hasProjected=!1);return}r.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=vf(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),r.transform=h;const{x:f,y:g}=this.projectionDelta;r.transformOrigin=`${f.origin*100}% ${g.origin*100}% 0`,u.animationValues?r.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:r.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in qt){if(d[y]===void 0)continue;const{correct:x,applyTo:b,isCSSVariable:v}=qt[y],E=h==="none"?d[y]:x(d[y],u);if(b){const w=b.length;for(let S=0;S<w;S++)r[b[S]]=E}else v?this.options.visualElement.renderState.vars[y]=E:r[y]=E}this.options.layoutId&&(r.pointerEvents=u===this?vn(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(r=>{var l;return(l=r.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Qr),this.root.sharedNodes.clear()}}}function Sf(e){e.updateLayout()}function Af(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=e.layout,{animationType:a}=e.options,r=t.source!==e.layout.source;a==="size"?Re(h=>{const f=r?t.measuredBox[h]:t.layoutBox[h],g=we(f);f.min=s[h].min,f.max=f.min+g}):Ka(a,t.layoutBox,s)&&Re(h=>{const f=r?t.measuredBox[h]:t.layoutBox[h],g=we(s[h]);f.max=f.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const l=vt();$t(l,s,t.layoutBox);const c=vt();r?$t(c,e.applyTransform(i,!0),t.measuredBox):$t(c,s,t.layoutBox);const u=!Ha(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:g}=h;if(f&&g){const y=ue();En(y,t.layoutBox,f.layoutBox);const x=ue();En(x,s,g.layoutBox),Wa(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function jf(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Cf(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Mf(e){e.clearSnapshot()}function Qr(e){e.clearMeasurements()}function eo(e){e.isLayoutDirty=!1}function Ef(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function to(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Pf(e){e.resolveTargetDelta()}function Df(e){e.calcProjection()}function Rf(e){e.resetSkewAndRotation()}function Nf(e){e.removeLeadSnapshot()}function no(e,t,n){e.translate=se(t.translate,0,n),e.scale=se(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function so(e,t,n,s){e.min=se(t.min,n.min,s),e.max=se(t.max,n.max,s)}function kf(e,t,n,s){so(e.x,t.x,n.x,s),so(e.y,t.y,n.y,s)}function Lf(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Vf={duration:.45,ease:[.4,0,.1,1]},io=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),ro=io("applewebkit/")&&!io("chrome/")?Math.round:ke;function oo(e){e.min=ro(e.min),e.max=ro(e.max)}function _f(e){oo(e.x),oo(e.y)}function Ka(e,t,n){return e==="position"||e==="preserve-aspect"&&!Uh(Zr(t),Zr(n),.2)}function Of(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const If=$a({attachResizeListener:(e,t)=>Zt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ls={current:void 0},Ga=$a({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ls.current){const e=new If({});e.mount(window),e.setOptions({layoutScroll:!0}),ls.current=e}return ls.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Ff={pan:{Feature:nf},drag:{Feature:tf,ProjectionNode:Ga,MeasureLayout:Fa}};function ao(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=s[i];a&&ne.postRender(()=>a(t,nn(t)))}class Bf extends Je{mount(){const{current:t}=this.node;t&&(this.unmount=rd(t,(n,s)=>(ao(this.node,s,"Start"),i=>ao(this.node,i,"End"))))}unmount(){}}class Uf extends Je{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Qt(Zt(this.node.current,"focus",()=>this.onFocus()),Zt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function lo(e,t,n){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=s[i];a&&ne.postRender(()=>a(t,nn(t)))}class Hf extends Je{mount(){const{current:t}=this.node;t&&(this.unmount=cd(t,(n,s)=>(lo(this.node,s,"Start"),(i,{success:a})=>lo(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ks=new WeakMap,cs=new WeakMap,Wf=e=>{const t=ks.get(e.target);t&&t(e)},zf=e=>{e.forEach(Wf)};function $f({root:e,...t}){const n=e||document;cs.has(n)||cs.set(n,{});const s=cs.get(n),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(zf,{root:e,...t})),s[i]}function Kf(e,t,n){const s=$f(t);return ks.set(e,n),s.observe(e),()=>{ks.delete(e),s.unobserve(e)}}const Gf={some:0,all:1};class Yf extends Je{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:i="some",once:a}=t,r={root:n?n.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:Gf[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return Kf(this.node.current,r,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Xf(t,n))&&this.startObserver()}unmount(){}}function Xf({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const qf={inView:{Feature:Yf},tap:{Feature:Hf},focus:{Feature:Uf},hover:{Feature:Bf}},Zf={layout:{ProjectionNode:Ga,MeasureLayout:Fa}},Jf={...Vh,...qf,...Ff,...Zf},Qf=Zd(Jf,uh),gn={informational:{primary:"#F59E0B",glow:"rgba(245, 158, 11, 0.3)",bg:"rgba(245, 158, 11, 0.15)"},mutable:{primary:"#D946EF",glow:"rgba(217, 70, 239, 0.3)",bg:"rgba(217, 70, 239, 0.15)"},validatable:{primary:"#3B82F6",glow:"rgba(59, 130, 246, 0.35)",bg:"rgba(59, 130, 246, 0.15)"},connective:{primary:"#10B981",glow:"rgba(16, 185, 129, 0.3)",bg:"rgba(16, 185, 129, 0.15)"},draggable:{primary:"#6366F1",glow:"rgba(99, 102, 241, 0.3)",bg:"rgba(99, 102, 241, 0.15)"},success:{primary:"#22C55E",glow:"rgba(34, 197, 94, 0.3)",bg:"rgba(34, 197, 94, 0.15)"},error:{primary:"#EF4444",glow:"rgba(239, 68, 68, 0.3)",bg:"rgba(239, 68, 68, 0.15)"}},Fe=({id:e,children:t,tooltip:n,position:s="auto",maxWidth:i=400,color:a=gn.informational.primary,bgColor:r=gn.informational.bg,className:l})=>{const[c,u]=p.useState(!1),[d,h]=p.useState("bottom"),[f,g]=p.useState({top:0,left:0}),y=p.useRef(null),x=p.useRef(null);return p.useEffect(()=>{var M;if(!y.current||!c)return;const b=y.current.getBoundingClientRect(),E=window.innerHeight-b.bottom,w=b.top,S=((M=x.current)==null?void 0:M.offsetHeight)||100,C=8;let N="bottom";s==="auto"?E<S+C&&w>E&&(N="top"):N=s,h(N);const _=N==="bottom"?b.bottom+window.scrollY+C:b.top+window.scrollY-S-C,D=Math.min(i,window.innerWidth-32);let k=b.left+b.width/2-D/2+window.scrollX;k=Math.max(16,Math.min(k,window.innerWidth-D-16)),g({top:_,left:k})},[c,s,i]),o.jsxs(o.Fragment,{children:[o.jsx("span",{ref:y,id:e,className:K("annotation annotation-hoverable",l),style:{color:a,textShadow:c?`0 0 8px ${gn.informational.glow}`:"none",background:c?r:"transparent",borderRadius:"2px",padding:c?"0 2px":"0",margin:c?"0 -2px":"0",cursor:"help",transition:"all 0.2s ease"},onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),children:t}),typeof window<"u"&&Rl.createPortal(o.jsx(bd,{children:c&&o.jsx(Qf.div,{ref:x,initial:{opacity:0,y:d==="bottom"?-8:8,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:d==="bottom"?-8:8,scale:.95},transition:{duration:.15,ease:[.4,0,.2,1]},className:"annotation-tooltip annotation-tooltip--informational",style:{position:"fixed",top:`${f.top}px`,left:`${f.left}px`,maxWidth:`${i}px`,minWidth:"200px",padding:"12px 16px",borderRadius:"10px",background:a,color:"white",fontSize:"0.9rem",lineHeight:1.6,boxShadow:`0 4px 20px ${gn.informational.glow}`,pointerEvents:"none",zIndex:1e3},children:typeof n=="string"?o.jsx("p",{className:"m-0",children:n}):n})}),document.body)]})},Pt=p.forwardRef(({className:e,...t},n)=>o.jsx("div",{className:"relative w-full overflow-auto",children:o.jsx("table",{ref:n,className:K("w-full caption-bottom text-sm",e),...t})}));Pt.displayName="Table";const Dt=p.forwardRef(({className:e,...t},n)=>o.jsx("thead",{ref:n,className:K("[&_tr]:border-b",e),...t}));Dt.displayName="TableHeader";const Rt=p.forwardRef(({className:e,...t},n)=>o.jsx("tbody",{ref:n,className:K("[&_tr:last-child]:border-0",e),...t}));Rt.displayName="TableBody";const em=p.forwardRef(({className:e,...t},n)=>o.jsx("tfoot",{ref:n,className:K("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));em.displayName="TableFooter";const Le=p.forwardRef(({className:e,...t},n)=>o.jsx("tr",{ref:n,className:K("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",e),...t}));Le.displayName="TableRow";const Se=p.forwardRef(({className:e,...t},n)=>o.jsx("th",{ref:n,className:K("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Se.displayName="TableHead";const ge=p.forwardRef(({className:e,...t},n)=>o.jsx("td",{ref:n,className:K("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));ge.displayName="TableCell";const tm=p.forwardRef(({className:e,...t},n)=>o.jsx("caption",{ref:n,className:K("mt-4 text-sm text-muted-foreground",e),...t}));tm.displayName="TableCaption";const nm=()=>{const[e,t]=p.useState({row:null,col:null,type:null}),[n,s]=p.useState(null),i=["Launch Product A","Launch Product B","Launch Product C"],a=["High Demand","Medium Demand","Low Demand"],r=[[200,100,-50],[150,120,30],[80,80,80]],l=(u,d)=>{s({row:u,col:d})},c=(u,d)=>{const h=e.type==="row"&&e.row===u,f=e.type==="col"&&e.col===d,g=(n==null?void 0:n.row)===u&&(n==null?void 0:n.col)===d;return K("transition-all duration-200 cursor-pointer text-center font-medium",h&&"bg-primary/20",f&&"bg-secondary/30",g&&"ring-2 ring-primary bg-primary/30",!h&&!f&&!g&&"hover:bg-muted/50")};return o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(Pt,{className:"border border-border rounded-lg",children:[o.jsx(Dt,{children:o.jsxs(Le,{className:"bg-muted/30",children:[o.jsx(Se,{className:"font-bold text-foreground border-r border-border",children:"Alternatives / States"}),a.map((u,d)=>o.jsxs(Se,{className:K("text-center font-semibold cursor-pointer transition-colors",e.type==="col"&&e.col===d?"bg-secondary/30 text-secondary-foreground":"hover:bg-muted/50"),onMouseEnter:()=>t({row:null,col:d,type:"col"}),onMouseLeave:()=>t({row:null,col:null,type:null}),children:[o.jsxs("span",{className:"text-muted-foreground text-xs block mb-1",children:["State ",d+1]}),u]},u))]})}),o.jsx(Rt,{children:i.map((u,d)=>o.jsxs(Le,{children:[o.jsxs(ge,{className:K("font-medium border-r border-border cursor-pointer transition-colors",e.type==="row"&&e.row===d?"bg-primary/20":"hover:bg-muted/50"),onMouseEnter:()=>t({row:d,col:null,type:"row"}),onMouseLeave:()=>t({row:null,col:null,type:null}),children:[o.jsxs("span",{className:"text-muted-foreground text-xs block mb-1",children:["Alternative ",d+1]}),u]}),r[d].map((h,f)=>o.jsx(ge,{className:c(d,f),onClick:()=>l(d,f),children:o.jsxs("span",{className:K("text-lg",h>=100?"text-green-600":h>=0?"text-foreground":"text-red-500"),children:["$",h,"k"]})},f))]},u))})]})}),o.jsx("div",{className:"bg-muted/30 rounded-lg p-4 border border-border",children:n?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("p",{className:"font-semibold text-primary",children:["Selected: ",i[n.row]," under ",a[n.col]]}),o.jsxs("p",{className:"text-muted-foreground",children:["If you choose ",o.jsx("strong",{children:i[n.row]})," and the market turns out to have"," ",o.jsx("strong",{children:a[n.col].toLowerCase()}),", your expected profit would be"," ",o.jsxs("strong",{className:r[n.row][n.col]>=0?"text-green-600":"text-red-500",children:["$",r[n.row][n.col],"k"]}),"."]})]}):o.jsx("p",{className:"text-muted-foreground italic",children:"Click on any cell in the matrix to see what that payoff means in context."})})]})},sm=({isPreview:e,onEditSection:t})=>o.jsxs(o.Fragment,{children:[o.jsxs(ee,{id:"intro-header",padding:"lg",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:1,children:"Decision Theory: Making Choices Under Uncertainty"}),o.jsx(X,{className:"text-lg text-muted-foreground mt-2",children:"Learn how to make rational decisions when the future is uncertain."})]}),o.jsxs(ee,{id:"intro-what-is-decision-theory",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"What is Decision-Making Under Uncertainty?"}),o.jsxs(X,{children:["Imagine you're a business owner deciding which product to launch. You don't know for certain whether the market will be favorable or not. This is a classic example of"," ",o.jsx(Fe,{tooltip:"A situation where you must choose an action without knowing which outcome will actually occur.",children:"decision-making under uncertainty"}),". Unlike decisions where outcomes are certain, here we must consider multiple possible futures."]})]}),o.jsxs(ee,{id:"intro-key-concepts",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"The Three Key Concepts"}),o.jsx(X,{children:"Every decision problem under uncertainty has three essential components:"}),o.jsxs("div",{className:"grid gap-4 mt-4 md:grid-cols-3",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[o.jsx("h3",{className:"font-semibold text-primary mb-2",children:"1. Alternatives"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"The different choices or actions available to the decision-maker. These are the options you can choose from."}),o.jsx("p",{className:"text-xs mt-2 italic text-muted-foreground",children:"Example: Launch Product A, B, or C"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[o.jsx("h3",{className:"font-semibold text-secondary mb-2",children:"2. States of Nature"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"The possible future scenarios that could occur. These are outside your control and uncertain."}),o.jsx("p",{className:"text-xs mt-2 italic text-muted-foreground",children:"Example: High, Medium, or Low market demand"})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[o.jsx("h3",{className:"font-semibold text-foreground mb-2",children:"3. Payoffs"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"The outcomes (usually profits or losses) that result from each combination of alternative and state of nature."}),o.jsx("p",{className:"text-xs mt-2 italic text-muted-foreground",children:"Example: $200k profit if Product A meets high demand"})]})]})]}),o.jsxs(ee,{id:"intro-decision-matrix",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"The Decision Matrix (Payoff Table)"}),o.jsxs(X,{children:["We organize all this information in a"," ",o.jsx(Fe,{tooltip:"A table that shows the payoff for each combination of alternative and state of nature. Rows represent alternatives, columns represent states of nature.",children:"decision matrix"})," ","(also called a payoff table). Each row represents an alternative, each column represents a state of nature, and each cell contains the payoff for that combination."]}),o.jsx("div",{className:"mt-6",children:o.jsx(nm,{})}),o.jsxs(X,{className:"mt-4",children:[o.jsx("strong",{children:"Try it:"})," Hover over the row headers to highlight all payoffs for an alternative. Hover over column headers to see outcomes under a specific state of nature. Click any cell to learn more about that specific scenario."]})]}),o.jsxs(ee,{id:"intro-challenge",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,enableMath:!1,children:"The Challenge: Which Alternative Should You Choose?"}),o.jsxs(X,{enableMath:!1,children:["Looking at the matrix above, which product would you launch? Product A offers the highest potential profit (",o.jsx("strong",{children:"$200k"}),") but also the biggest risk (",o.jsx("strong",{children:"$50k"}),"). Product C guarantees ",o.jsx("strong",{children:"$80k"}),` no matter what. There's no single "correct" answer  it depends on your risk tolerance. We'll explore three approaches:`," ",o.jsx(Fe,{tooltip:"Choose the alternative with the best possible outcome (optimistic approach).",children:"Maximax"})," ","(optimist),"," ",o.jsx(Fe,{tooltip:"Choose the alternative with the best worst-case outcome (pessimistic approach).",children:"Maximin"})," ","(pessimist), and"," ",o.jsx(Fe,{tooltip:"Minimize the maximum regret you could experience (opportunity cost approach).",children:"Minimax Regret"})," ",'(minimizing "what if" feelings).']})]})]}),im=()=>{const[e,t]=p.useState(0),[n,s]=p.useState(!1),[i,a]=p.useState(-1),[r,l]=p.useState(-1),[c,u]=p.useState(-1),[d,h]=p.useState(!1),[f,g]=p.useState([]),[y,x]=p.useState(!1),b=["Launch Product A","Launch Product B","Launch Product C"],v=["High Demand","Medium Demand","Low Demand"],E=[[200,100,-50],[150,120,30],[80,80,80]],w=E.map(M=>Math.max(...M)),S=w.indexOf(Math.max(...w));p.useEffect(()=>{e===0?(h(!1),g([]),l(-1),a(-1),u(-1),x(!1)):e===1?(h(!0),g([]),l(-1),x(!1),(async()=>{for(let T=0;T<b.length;T++){a(T);for(let O=0;O<v.length;O++)l(O),await new Promise(W=>setTimeout(W,500));l(-1),await new Promise(O=>setTimeout(O,600)),g(O=>[...O,T]),await new Promise(O=>setTimeout(O,500))}a(-1)})()):e===2?(g([0,1,2]),l(-1),a(-1),u(-1),x(!1)):e===3?(g([0,1,2]),l(-1),a(-1),x(!1),(async()=>{for(let T=0;T<b.length;T++)u(T),await new Promise(O=>setTimeout(O,700));u(-1)})()):e===4?(g([0,1,2]),l(-1),a(-1),u(-1),x(!1)):e===5&&(g([0,1,2]),l(-1),a(-1),u(-1),(async()=>(await new Promise(T=>setTimeout(T,500)),x(!0),await new Promise(T=>setTimeout(T,1e3)),s(!0)))())},[e,b.length,v.length]);const C=(M,T)=>{const W=E[M][T]===w[M],ce=M===S&&W&&y,Z=i===M,J=Z&&r===T,z=Z&&r===-1&&W&&!f.includes(M);if(e===0)return"bg-background";if(e===1){if(J)return"bg-amber-100";if(z)return"bg-green-200";if(W&&f.includes(M))return"bg-green-100"}if(e>=2){if(ce)return"bg-primary/20";if(W)return"bg-green-100"}return"bg-background"},N=M=>y&&M===S?"bg-primary/5":"",_=M=>e===3&&c===M?"bg-amber-100":e===3&&c===-1&&M===S||e>=4&&M===S?"bg-primary/20":"",D=e<=1?0:e<=3?1:2,k=[{title:"Step 1: Find the Maximum Payoff for Each Alternative",description:"For each row (alternative), identify the best possible outcome  the highest payoff you could achieve if the most favorable state occurs."},{title:"Step 2: Select the Maximum of the Max Payoffs",description:"Look at the Max Payoff column and find the highest value among all the maximum payoffs."},{title:"Step 3: Make the Maximax Decision",description:"The alternative with the highest maximum payoff is the Maximax choice. This is the optimist's decision!"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:k.map((M,T)=>o.jsxs("div",{className:K("flex items-center gap-2",T<=D||n?"text-primary":"text-muted-foreground"),children:[o.jsx("div",{className:K("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium border-2 transition-all",T<D||n&&T<=D?"bg-primary text-primary-foreground border-primary":T===D?"border-primary text-primary":"border-muted-foreground/30"),children:T+1}),T<k.length-1&&o.jsx(wt,{className:"w-4 h-4 text-muted-foreground"})]},T))}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[y&&o.jsx(Is,{className:"w-5 h-5 text-primary"}),k[D].title]}),o.jsx("p",{className:"text-muted-foreground mt-1",children:k[D].description})]}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(Pt,{className:"border border-border rounded-lg",children:[o.jsx(Dt,{children:o.jsxs(Le,{className:"bg-muted/30",children:[o.jsx(Se,{className:"font-bold text-foreground border-r border-border",children:"Alternatives"}),v.map(M=>o.jsx(Se,{className:"text-center font-semibold",children:M},M)),d&&o.jsx(Se,{className:"text-center font-bold border-l-2 border-primary/50 bg-primary/5 animate-in fade-in slide-in-from-right-4 duration-300",children:"Max Payoff"})]})}),o.jsx(Rt,{children:b.map((M,T)=>o.jsxs(Le,{className:N(T),children:[o.jsx(ge,{className:"font-medium border-r border-border",children:M}),E[T].map((O,W)=>o.jsx(ge,{className:K("text-center transition-colors duration-300",C(T,W)),children:o.jsxs("span",{className:"text-lg font-medium",children:["$",O,"k"]})},W)),d&&o.jsx(ge,{className:K("text-center border-l-2 border-primary/50 font-bold transition-colors duration-300",_(T)),children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsxs("span",{className:K("text-green-600 transition-opacity duration-500",f.includes(T)?"opacity-100":"opacity-0"),children:["$",w[T],"k"]}),y&&T===S&&o.jsx("span",{className:"text-xs text-primary",children:" Best!"})]})})]},M))})]})}),y&&o.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-lg p-4 animate-in fade-in slide-in-from-bottom-2",children:[o.jsxs("p",{className:"font-semibold text-primary",children:["Maximax Decision: ",b[S]]}),o.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:["An optimist would choose ",b[S]," because it offers the highest possible payoff of $",w[S],"k if ",v[0]," occurs."]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Te,{variant:"outline",onClick:()=>{t(0),s(!1)},disabled:e===0&&!n,className:"gap-2",children:[o.jsx(Os,{className:"w-4 h-4"}),"Reset"]}),o.jsxs(Te,{onClick:()=>t(e+1),disabled:n||e===5,className:"gap-2",children:[n?"Completed":e===0||e===2||e===4?"Reveal":"Next Step",o.jsx(wt,{className:"w-4 h-4"})]})]})]})},rm=({isPreview:e,onEditSection:t})=>o.jsxs(o.Fragment,{children:[o.jsxs(ee,{id:"maximax-header",padding:"lg",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:1,children:"Maximax Criterion: The Optimist's Choice"}),o.jsx(X,{className:"text-lg text-muted-foreground mt-2",children:"When you believe the best will happen, aim for the highest possible reward."})]}),o.jsxs(ee,{id:"maximax-concept",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"What is Maximax?"}),o.jsxs(X,{children:["Maximax is the"," ",o.jsx(Fe,{tooltip:"Someone who expects the most favorable outcome to occur and makes decisions accordingly.",children:"optimist's"})," ",'choice. The name means "',o.jsx("strong",{children:"MAXI"}),"mum of the ",o.jsx("strong",{children:"MAX"}),`imums"  find the best outcome for each option, then pick the one with the highest upside. It's the mindset of entrepreneurs who focus on opportunities and are willing to accept risk for bigger rewards.`]})]}),o.jsxs(ee,{id:"maximax-algorithm",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"How Maximax Works"}),o.jsx(X,{children:"The algorithm is straightforward:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-4 ml-4",children:[o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"For each alternative, find the maximum payoff"}),"  the best outcome if everything goes perfectly."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Compare these maximum payoffs across all alternatives"}),"."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Select the alternative with the highest maximum"}),"  this is your Maximax choice."]})]})]}),o.jsxs(ee,{id:"maximax-demo",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"Interactive Example"}),o.jsx(X,{children:'Walk through each step to see how Maximax works with our product launch example. Click "Next Step" to progress through the decision process.'}),o.jsx("div",{className:"mt-6",children:o.jsx(im,{})})]})]}),om=()=>{const[e,t]=p.useState(0),[n,s]=p.useState(!1),[i,a]=p.useState(-1),[r,l]=p.useState(-1),[c,u]=p.useState(-1),[d,h]=p.useState(!1),[f,g]=p.useState([]),[y,x]=p.useState(!1),b=["Launch Product A","Launch Product B","Launch Product C"],v=["High Demand","Medium Demand","Low Demand"],E=[[200,100,-50],[150,120,30],[80,80,80]],w=E.map(M=>Math.min(...M)),S=w.indexOf(Math.max(...w));p.useEffect(()=>{e===0?(h(!1),g([]),l(-1),a(-1),u(-1),x(!1)):e===1?(h(!0),g([]),l(-1),x(!1),(async()=>{for(let T=0;T<b.length;T++){a(T);for(let O=0;O<v.length;O++)l(O),await new Promise(W=>setTimeout(W,500));l(-1),await new Promise(O=>setTimeout(O,600)),g(O=>[...O,T]),await new Promise(O=>setTimeout(O,500))}a(-1)})()):e===2?(g([0,1,2]),l(-1),a(-1),u(-1),x(!1)):e===3?(g([0,1,2]),l(-1),a(-1),x(!1),(async()=>{for(let T=0;T<b.length;T++)u(T),await new Promise(O=>setTimeout(O,700));u(-1)})()):e===4?(g([0,1,2]),l(-1),a(-1),u(-1),x(!1)):e===5&&(g([0,1,2]),l(-1),a(-1),u(-1),(async()=>(await new Promise(T=>setTimeout(T,500)),x(!0),await new Promise(T=>setTimeout(T,1e3)),s(!0)))())},[e,b.length,v.length]);const C=(M,T)=>{const W=E[M][T]===w[M],ce=M===S&&W&&y,Z=i===M,J=Z&&r===T,z=Z&&r===-1&&W&&!f.includes(M);if(e===0)return"bg-background";if(e===1){if(J)return"bg-amber-100";if(z)return"bg-green-200";if(W&&f.includes(M))return"bg-green-100"}if(e>=2){if(ce)return"bg-primary/20";if(W)return"bg-green-100"}return"bg-background"},N=M=>y&&M===S?"bg-primary/5":"",_=M=>e===3&&c===M?"bg-amber-100":e===3&&c===-1&&M===S||e>=4&&M===S?"bg-primary/20":"",D=e<=1?0:e<=3?1:2,k=[{title:"Step 1: Find the Minimum Payoff for Each Alternative",description:"For each row (alternative), identify the worst possible outcome  the lowest payoff that could happen if things go badly."},{title:"Step 2: Select the Maximum of the Min Payoffs",description:"Look at the Min Payoff column and find the highest value among all the minimum payoffs."},{title:"Step 3: Make the Maximin Decision",description:"The alternative with the highest minimum payoff is the Maximin choice. This is the pessimist's decision!"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex items-center gap-2 mb-4",children:k.map((M,T)=>o.jsxs("div",{className:K("flex items-center gap-2",T<=D||n?"text-primary":"text-muted-foreground"),children:[o.jsx("div",{className:K("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium border-2 transition-all",T<D||n&&T<=D?"bg-primary text-primary-foreground border-primary":T===D?"border-primary text-primary":"border-muted-foreground/30"),children:T+1}),T<k.length-1&&o.jsx(wt,{className:"w-4 h-4 text-muted-foreground"})]},T))}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[y&&o.jsx(Is,{className:"w-5 h-5 text-primary"}),k[D].title]}),o.jsx("p",{className:"text-muted-foreground mt-1",children:k[D].description})]}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(Pt,{className:"border border-border rounded-lg",children:[o.jsx(Dt,{children:o.jsxs(Le,{className:"bg-muted/30",children:[o.jsx(Se,{className:"font-bold text-foreground border-r border-border",children:"Alternatives"}),v.map(M=>o.jsx(Se,{className:"text-center font-semibold",children:M},M)),d&&o.jsx(Se,{className:"text-center font-bold border-l-2 border-primary/50 bg-primary/5 animate-in fade-in slide-in-from-right-4 duration-300",children:"Min Payoff"})]})}),o.jsx(Rt,{children:b.map((M,T)=>o.jsxs(Le,{className:N(T),children:[o.jsx(ge,{className:"font-medium border-r border-border",children:M}),E[T].map((O,W)=>o.jsx(ge,{className:K("text-center transition-colors duration-300",C(T,W)),children:o.jsxs("span",{className:"text-lg font-medium",children:["$",O,"k"]})},W)),d&&o.jsx(ge,{className:K("text-center border-l-2 border-primary/50 font-bold transition-colors duration-300",_(T)),children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsxs("span",{className:K("text-green-600 transition-opacity duration-500",f.includes(T)?"opacity-100":"opacity-0"),children:["$",w[T],"k"]}),y&&T===S&&o.jsx("span",{className:"text-xs text-primary",children:" Best!"})]})})]},M))})]})}),y&&o.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-lg p-4 animate-in fade-in slide-in-from-bottom-2",children:[o.jsxs("p",{className:"font-semibold text-primary",children:["Maximin Decision: ",b[S]]}),o.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:["A pessimist would choose ",b[S]," because even in the worst case, you're guaranteed at least $",w[S],'k. This is the safest choice with the highest "floor."']})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Te,{variant:"outline",onClick:()=>{t(0),s(!1)},disabled:e===0&&!n,className:"gap-2",children:[o.jsx(Os,{className:"w-4 h-4"}),"Reset"]}),o.jsxs(Te,{onClick:()=>t(e+1),disabled:n||e===5,className:"gap-2",children:[n?"Completed":e===0||e===2||e===4?"Reveal":"Next Step",o.jsx(wt,{className:"w-4 h-4"})]})]})]})},am=({isPreview:e,onEditSection:t})=>o.jsxs(o.Fragment,{children:[o.jsxs(ee,{id:"maximin-header",padding:"lg",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:1,children:"Maximin Criterion: The Pessimist's Choice"}),o.jsx(X,{className:"text-lg text-muted-foreground mt-2",children:"Protect yourself from the worst  guarantee the best possible floor."})]}),o.jsxs(ee,{id:"maximin-concept",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"What is Maximin?"}),o.jsxs(X,{children:["Maximin is the"," ",o.jsx(Fe,{tooltip:"Someone who expects unfavorable outcomes and makes decisions to minimize potential losses.",children:"pessimist's"})," ",'choice. The name means "',o.jsx("strong",{children:"MAXI"}),"mum of the ",o.jsx("strong",{children:"MIN"}),`imums"  find the worst outcome for each option, then pick the one with the best worst-case. It's about`," ",o.jsx(Fe,{tooltip:"A strategy that focuses on limiting downside risk rather than maximizing upside potential.",children:"risk aversion"}),': "If everything goes wrong, which choice leaves me best off?"']})]}),o.jsxs(ee,{id:"maximin-algorithm",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"How Maximin Works"}),o.jsx(X,{children:"The algorithm protects against the worst:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-4 ml-4",children:[o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"For each alternative, find the minimum payoff"}),"  the worst outcome if things go badly."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Compare these minimum payoffs across all alternatives"}),"."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Select the alternative with the highest minimum"}),"  this is your Maximin choice."]})]})]}),o.jsxs(ee,{id:"maximin-demo",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"Interactive Example"}),o.jsx(X,{children:"Walk through each step to see how Maximin protects you from the worst outcomes. Notice how this leads to a different choice than Maximax!"}),o.jsx("div",{className:"mt-6",children:o.jsx(om,{})})]})]}),lm=()=>{const[e,t]=p.useState(0),[n,s]=p.useState(!1),[i,a]=p.useState(-1),[r,l]=p.useState(-1),[c,u]=p.useState(!1),[d,h]=p.useState([]),[f,g]=p.useState(!1),[y,x]=p.useState(-1),[b,v]=p.useState(-1),[E,w]=p.useState(!1),[S,C]=p.useState([]),[N,_]=p.useState(-1),[D,k]=p.useState(!1),[M,T]=p.useState(null),[O,W]=p.useState("none"),[ce,Z]=p.useState([]),J=["Product A","Product B","Product C"],z=["High Demand","Medium Demand","Low Demand"],G=[[200,100,-50],[150,120,30],[80,80,80]],oe=z.map((R,P)=>Math.max(...G.map(L=>L[P]))),ye=G.map(R=>R.map((P,L)=>oe[L]-P)),Y=ye.map(R=>Math.max(...R)),Ce=Y.indexOf(Math.min(...Y));p.useEffect(()=>{e===0?(u(!1),h([]),a(-1),l(-1),g(!1),w(!1),C([]),x(-1),v(-1),_(-1),k(!1),T(null),W("none"),Z([])):e===1?(u(!0),h([]),k(!1),(async()=>{for(let P=0;P<z.length;P++){for(let L=0;L<J.length;L++)a(P),l(L),await new Promise(I=>setTimeout(I,500));l(-1),await new Promise(L=>setTimeout(L,600)),h(L=>[...L,P]),await new Promise(L=>setTimeout(L,500))}a(-1)})()):e===2?(h([0,1,2]),a(-1),l(-1),g(!1),k(!1),Z([])):e===3?(h([0,1,2]),g(!1),w(!1),C([]),k(!1),Z([]),(async()=>{for(let P=0;P<z.length;P++)for(let L=0;L<J.length;L++)T({row:L,col:P}),W("none"),await new Promise(I=>setTimeout(I,300)),W("best"),await new Promise(I=>setTimeout(I,400)),W("minus"),await new Promise(I=>setTimeout(I,300)),W("payoff"),await new Promise(I=>setTimeout(I,400)),W("equals"),await new Promise(I=>setTimeout(I,300)),W("result"),await new Promise(I=>setTimeout(I,600)),Z(I=>[...I,`${L}-${P}`]),W("none"),await new Promise(I=>setTimeout(I,200));T(null)})()):e===4?(g(!0),w(!1),C([]),k(!1)):e===5?(w(!0),C([]),k(!1),(async()=>{for(let P=0;P<J.length;P++){x(P);for(let L=0;L<z.length;L++)v(L),await new Promise(I=>setTimeout(I,500));v(-1),await new Promise(L=>setTimeout(L,600)),C(L=>[...L,P]),await new Promise(L=>setTimeout(L,500))}x(-1)})()):e===6?(C([0,1,2]),v(-1),x(-1),_(-1),k(!1)):e===7?(C([0,1,2]),k(!1),(async()=>{for(let P=0;P<J.length;P++)_(P),await new Promise(L=>setTimeout(L,700));_(-1)})()):e===8?(C([0,1,2]),_(-1),k(!1)):e===9&&(C([0,1,2]),_(-1),(async()=>(await new Promise(P=>setTimeout(P,500)),k(!0),await new Promise(P=>setTimeout(P,1e3)),s(!0)))())},[e,J.length,z.length]);const re=(R,P)=>{const L=G[R][P]===oe[P],I=i===P&&r===R,he=i===P&&r===-1&&L&&!d.includes(P);if(e===0)return"bg-background";if(e===1){if(I)return"bg-amber-100";if(he)return"bg-green-200";if(L&&d.includes(P))return"bg-green-100"}return e>=2&&L?"bg-green-100":"bg-background"},at=(R,P)=>{const L=G[R][P],I=oe[P],he=ye[R][P],fe=(M==null?void 0:M.row)===R&&(M==null?void 0:M.col)===P,Qe=ce.includes(`${R}-${P}`);if(e===3){if(fe&&O!=="none")return o.jsxs("div",{className:"flex flex-col items-center min-h-[48px] justify-center",children:[o.jsxs("span",{className:"text-sm text-muted-foreground font-mono",children:[O==="best"&&o.jsxs(o.Fragment,{children:[I,o.jsx("span",{className:"animate-pulse",children:"|"})]}),O==="minus"&&o.jsxs(o.Fragment,{children:[I," -",o.jsx("span",{className:"animate-pulse",children:"|"})]}),O==="payoff"&&o.jsxs(o.Fragment,{children:[I," - ",L,o.jsx("span",{className:"animate-pulse",children:"|"})]}),O==="equals"&&o.jsxs(o.Fragment,{children:[I," - ",L," =",o.jsx("span",{className:"animate-pulse",children:"|"})]}),O==="result"&&o.jsxs(o.Fragment,{children:[I," - ",L," ="]})]}),O==="result"&&o.jsx("span",{className:"text-lg font-bold text-green-600 animate-in fade-in",children:he})]});if(Qe)return o.jsx("span",{className:"text-lg font-medium",children:he})}return e>=4?o.jsx("span",{className:"text-lg font-medium",children:he}):o.jsxs("span",{className:"text-lg font-medium",children:["$",L,"k"]})},q=(R,P)=>{const I=ye[R][P]===Y[R],he=y===R,fe=he&&b===P,Qe=he&&b===-1&&I&&!S.includes(R);if(e===5){if(fe)return"bg-amber-100";if(Qe)return"bg-green-200";if(I&&S.includes(R))return"bg-green-100"}if(e>=6){if(D&&R===Ce&&I)return"bg-primary/20";if(I)return"bg-green-100"}return"bg-background"},Me=R=>D&&R===Ce?"bg-primary/5":"",A=R=>e===7&&N===R?"bg-amber-100":e===7&&N===-1&&R===Ce||e>=8&&R===Ce?"bg-primary/20":"",B=e<=1?0:e<=3?1:e<=5?2:e<=7?3:4,H=[{title:"Step 1: Find the Best Payoff in Each Column",description:"For each state of nature (column), identify the highest payoff  the best you could do if you knew that state would occur."},{title:"Step 2: Calculate the Regret Matrix",description:"For each cell, calculate regret = (best in column) - (cell value). Regret represents the 'opportunity cost' of not choosing the best option for that state."},{title:"Step 3: Find Maximum Regret for Each Alternative",description:"For each alternative (row), find the maximum regret  the worst 'missed opportunity' you could experience."},{title:"Step 4: Select the Minimum of Maximum Regrets",description:"Look at the Max Regret column and find the smallest value among all the maximum regrets."},{title:"Step 5: Make the Minimax Regret Decision",description:"The alternative with the smallest maximum regret is the Minimax Regret choice. This minimizes your worst-case 'what if' feeling!"}];return o.jsxs("div",{className:"space-y-6",children:[o.jsx("div",{className:"flex flex-wrap items-center gap-2 mb-4",children:H.map((R,P)=>o.jsxs("div",{className:K("flex items-center gap-2",P<=B||n?"text-primary":"text-muted-foreground"),children:[o.jsx("div",{className:K("w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium border-2 transition-all",P<B||n&&P<=B?"bg-primary text-primary-foreground border-primary":P===B?"border-primary text-primary":"border-muted-foreground/30"),children:P+1}),P<H.length-1&&o.jsx(wt,{className:"w-4 h-4 text-muted-foreground"})]},P))}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4",children:[o.jsxs("h3",{className:"font-semibold text-lg flex items-center gap-2",children:[D&&o.jsx(Is,{className:"w-5 h-5 text-primary"}),H[B].title]}),o.jsx("p",{className:"text-muted-foreground mt-1",children:H[B].description})]}),o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{children:[o.jsx("h4",{className:"font-medium mb-2 text-sm text-muted-foreground",children:e===3&&ce.length>0?"Calculating Regret Values...":e>=4?"Regret Matrix":"Payoff Matrix"}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(Pt,{className:"border border-border rounded-lg",children:[o.jsx(Dt,{children:o.jsxs(Le,{className:"bg-muted/30",children:[o.jsx(Se,{className:"font-bold text-foreground border-r border-border",children:"Alternatives"}),z.map(R=>o.jsx(Se,{className:"text-center font-semibold",children:R},R)),E&&o.jsx(Se,{className:"text-center font-bold border-l-2 border-primary/50 bg-primary/5 animate-in fade-in slide-in-from-right-4 duration-300",children:"Max Regret"})]})}),o.jsxs(Rt,{children:[J.map((R,P)=>o.jsxs(Le,{className:Me(P),children:[o.jsx(ge,{className:"font-medium border-r border-border",children:R}),G[P].map((L,I)=>o.jsx(ge,{className:K("text-center transition-colors duration-300",re(P,I),e>=5&&q(P,I)),children:at(P,I)},I)),E&&o.jsx(ge,{className:K("text-center border-l-2 border-primary/50 font-bold transition-colors duration-300",A(P)),children:o.jsxs("div",{className:"flex items-center justify-center gap-1",children:[o.jsx("span",{className:K("text-green-600 transition-opacity duration-500",S.includes(P)?"opacity-100":"opacity-0"),children:Y[P]}),D&&P===Ce&&o.jsx("span",{className:"text-xs text-primary",children:" Min!"})]})})]},R)),c&&e<4&&o.jsxs(Le,{className:"bg-primary/5 border-t-2 border-primary/50",children:[o.jsx(ge,{className:"font-bold text-primary border-r border-border",children:"Best in Column"}),oe.map((R,P)=>o.jsx(ge,{className:"text-center",children:o.jsxs("span",{className:K("font-bold text-green-600 transition-opacity duration-500",d.includes(P)?"opacity-100":"opacity-0"),children:["$",R,"k"]})},P))]})]})]})})]})}),D&&o.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-lg p-4 animate-in fade-in slide-in-from-bottom-2",children:[o.jsxs("p",{className:"font-semibold text-primary",children:["Minimax Regret Decision: ",J[Ce]]}),o.jsxs("p",{className:"text-muted-foreground text-sm mt-1",children:["By choosing ",J[Ce],", your maximum regret is only ",Y[Ce],`. This means no matter what happens, you won't look back and think "I could have done `,Y[Ce],` better if only I'd chosen differently."`]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Te,{variant:"outline",onClick:()=>{t(0),s(!1)},disabled:e===0&&!n,className:"gap-2",children:[o.jsx(Os,{className:"w-4 h-4"}),"Reset"]}),o.jsxs(Te,{onClick:()=>t(e+1),disabled:n||e===9,className:"gap-2",children:[n?"Completed":e===0||e===2||e===4||e===6||e===8?"Reveal":"Next Step",o.jsx(wt,{className:"w-4 h-4"})]})]})]})},cm=({isPreview:e,onEditSection:t})=>o.jsxs(o.Fragment,{children:[o.jsxs(ee,{id:"minimax-regret-header",padding:"lg",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:1,children:'Minimax Regret: Minimizing "What If" Feelings'}),o.jsx(X,{className:"text-lg text-muted-foreground mt-2",children:"Avoid the pain of looking back and wishing you'd chosen differently."})]}),o.jsxs(ee,{id:"minimax-regret-concept",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"What is Regret?"}),o.jsxs(X,{children:[o.jsx(Fe,{tooltip:"The difference between what you actually got and what you could have gotten if you had made the best choice for that particular outcome.",children:"Regret"})," ",'measures the "what if" feeling  the gap between what you got and what you could have gotten. For example, if you chose Product B and earned ',o.jsx("strong",{children:"$150k"}),", but Product A would have earned ",o.jsx("strong",{children:"$200k"}),", your regret is ",o.jsx("strong",{children:"$50k"}),". It's not a loss, but a missed opportunity."]})]}),o.jsxs(ee,{id:"minimax-regret-philosophy",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"The Minimax Regret Philosophy"}),o.jsx(X,{children:`The Minimax Regret criterion says: "I want to minimize the maximum regret I could experience." It's a balanced approach  neither purely optimistic nor purely pessimistic. Instead, it focuses on avoiding the worst "hindsight" feeling.`}),o.jsx("div",{className:"bg-muted/30 rounded-lg p-4 mt-4 border border-border",children:o.jsx("p",{className:"italic text-muted-foreground",children:`"I can accept not getting the absolute best outcome, but I don't want to look back and feel terrible about my choice."`})})]}),o.jsxs(ee,{id:"minimax-regret-algorithm",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"How Minimax Regret Works"}),o.jsx(X,{children:'The algorithm minimizes your worst "what if" feeling:'}),o.jsxs("ol",{className:"list-decimal list-inside space-y-2 mt-4 ml-4",children:[o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"For each state of nature, find the best payoff"}),"  the maximum in each column."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Calculate regret for each cell"}),"  subtract the cell value from the best in its column."]}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"For each alternative, find its maximum regret"}),'  the worst "what if" for that choice.']}),o.jsxs("li",{className:"text-muted-foreground",children:[o.jsx("span",{className:"text-foreground",children:"Select the alternative with the smallest maximum regret"}),"  this is your Minimax Regret choice."]})]})]}),o.jsxs(ee,{id:"minimax-regret-demo",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"Interactive Example"}),o.jsx(X,{children:"Walk through each step to see how the regret matrix is built and the final decision is made."}),o.jsx("div",{className:"mt-6",children:o.jsx(lm,{})})]})]});function Ya(e,[t,n]){return Math.min(n,Math.max(t,e))}function um(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Xa=["PageUp","PageDown"],qa=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Za={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Nt="Slider",[Ls,dm,hm]=Nl(Nt),[Ja,Vm]=kl(Nt,[hm]),[fm,kn]=Ja(Nt),Qa=p.forwardRef((e,t)=>{const{name:n,min:s=0,max:i=100,step:a=1,orientation:r="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[s],value:d,onValueChange:h=()=>{},onValueCommit:f=()=>{},inverted:g=!1,form:y,...x}=e,b=p.useRef(new Set),v=p.useRef(0),w=r==="horizontal"?mm:pm,[S=[],C]=Ll({prop:d,defaultProp:u,onChange:T=>{var W;(W=[...b.current][v.current])==null||W.focus(),h(T)}}),N=p.useRef(S);function _(T){const O=vm(S,T);M(T,O)}function D(T){M(T,v.current)}function k(){const T=N.current[v.current];S[v.current]!==T&&f(S)}function M(T,O,{commit:W}={commit:!1}){const ce=Am(a),Z=jm(Math.round((T-s)/a)*a+s,ce),J=Ya(Z,[s,i]);C((z=[])=>{const G=xm(z,J,O);if(Sm(G,c*a)){v.current=G.indexOf(J);const oe=String(G)!==String(z);return oe&&W&&f(G),oe?G:z}else return z})}return o.jsx(fm,{scope:e.__scopeSlider,name:n,disabled:l,min:s,max:i,valueIndexToChangeRef:v,thumbs:b.current,values:S,orientation:r,form:y,children:o.jsx(Ls.Provider,{scope:e.__scopeSlider,children:o.jsx(Ls.Slot,{scope:e.__scopeSlider,children:o.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:pt(x.onPointerDown,()=>{l||(N.current=S)}),min:s,max:i,inverted:g,onSlideStart:l?void 0:_,onSlideMove:l?void 0:D,onSlideEnd:l?void 0:k,onHomeKeyDown:()=>!l&&M(s,0,{commit:!0}),onEndKeyDown:()=>!l&&M(i,S.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:O})=>{if(!l){const Z=Xa.includes(T.key)||T.shiftKey&&qa.includes(T.key)?10:1,J=v.current,z=S[J],G=a*Z*O;M(z+G,J,{commit:!0})}}})})})})});Qa.displayName=Nt;var[el,tl]=Ja(Nt,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mm=p.forwardRef((e,t)=>{const{min:n,max:s,dir:i,inverted:a,onSlideStart:r,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=e,[h,f]=p.useState(null),g=jt(t,w=>f(w)),y=p.useRef(void 0),x=Vl(i),b=x==="ltr",v=b&&!a||!b&&a;function E(w){const S=y.current||h.getBoundingClientRect(),C=[0,S.width],_=xi(C,v?[n,s]:[s,n]);return y.current=S,_(w-S.left)}return o.jsx(el,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:o.jsx(nl,{dir:x,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const S=E(w.clientX);r==null||r(S)},onSlideMove:w=>{const S=E(w.clientX);l==null||l(S)},onSlideEnd:()=>{y.current=void 0,c==null||c()},onStepKeyDown:w=>{const C=Za[v?"from-left":"from-right"].includes(w.key);u==null||u({event:w,direction:C?-1:1})}})})}),pm=p.forwardRef((e,t)=>{const{min:n,max:s,inverted:i,onSlideStart:a,onSlideMove:r,onSlideEnd:l,onStepKeyDown:c,...u}=e,d=p.useRef(null),h=jt(t,d),f=p.useRef(void 0),g=!i;function y(x){const b=f.current||d.current.getBoundingClientRect(),v=[0,b.height],w=xi(v,g?[s,n]:[n,s]);return f.current=b,w(x-b.top)}return o.jsx(el,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:o.jsx(nl,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const b=y(x.clientY);a==null||a(b)},onSlideMove:x=>{const b=y(x.clientY);r==null||r(b)},onSlideEnd:()=>{f.current=void 0,l==null||l()},onStepKeyDown:x=>{const v=Za[g?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:v?-1:1})}})})}),nl=p.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:r,onEndKeyDown:l,onStepKeyDown:c,...u}=e,d=kn(Nt,n);return o.jsx(Jt.span,{...u,ref:t,onKeyDown:pt(e.onKeyDown,h=>{h.key==="Home"?(r(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):Xa.concat(qa).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:pt(e.onPointerDown,h=>{const f=h.target;f.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(f)?f.focus():s(h)}),onPointerMove:pt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&i(h)}),onPointerUp:pt(e.onPointerUp,h=>{const f=h.target;f.hasPointerCapture(h.pointerId)&&(f.releasePointerCapture(h.pointerId),a(h))})})}),sl="SliderTrack",il=p.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=kn(sl,n);return o.jsx(Jt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...s,ref:t})});il.displayName=sl;var Vs="SliderRange",rl=p.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=kn(Vs,n),a=tl(Vs,n),r=p.useRef(null),l=jt(t,r),c=i.values.length,u=i.values.map(f=>ll(f,i.min,i.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return o.jsx(Jt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...s,ref:l,style:{...e.style,[a.startEdge]:d+"%",[a.endEdge]:h+"%"}})});rl.displayName=Vs;var _s="SliderThumb",ol=p.forwardRef((e,t)=>{const n=dm(e.__scopeSlider),[s,i]=p.useState(null),a=jt(t,l=>i(l)),r=p.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return o.jsx(gm,{...e,ref:a,index:r})}),gm=p.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,name:i,...a}=e,r=kn(_s,n),l=tl(_s,n),[c,u]=p.useState(null),d=jt(t,E=>u(E)),h=c?r.form||!!c.closest("form"):!0,f=_l(c),g=r.values[s],y=g===void 0?0:ll(g,r.min,r.max),x=bm(s,r.values.length),b=f==null?void 0:f[l.size],v=b?Tm(b,y,l.direction):0;return p.useEffect(()=>{if(c)return r.thumbs.add(c),()=>{r.thumbs.delete(c)}},[c,r.thumbs]),o.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${y}% + ${v}px)`},children:[o.jsx(Ls.ItemSlot,{scope:e.__scopeSlider,children:o.jsx(Jt.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":r.min,"aria-valuenow":g,"aria-valuemax":r.max,"aria-orientation":r.orientation,"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,tabIndex:r.disabled?void 0:0,...a,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:pt(e.onFocus,()=>{r.valueIndexToChangeRef.current=s})})}),h&&o.jsx(al,{name:i??(r.name?r.name+(r.values.length>1?"[]":""):void 0),form:r.form,value:g},s)]})});ol.displayName=_s;var ym="RadioBubbleInput",al=p.forwardRef(({__scopeSlider:e,value:t,...n},s)=>{const i=p.useRef(null),a=jt(i,s),r=um(t);return p.useEffect(()=>{const l=i.current;if(!l)return;const c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(r!==t&&d){const h=new Event("input",{bubbles:!0});d.call(l,t),l.dispatchEvent(h)}},[r,t]),o.jsx(Jt.input,{style:{display:"none"},...n,ref:a,defaultValue:t})});al.displayName=ym;function xm(e=[],t,n){const s=[...e];return s[n]=t,s.sort((i,a)=>i-a)}function ll(e,t,n){const a=100/(n-t)*(e-t);return Ya(a,[0,100])}function bm(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function vm(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),s=Math.min(...n);return n.indexOf(s)}function Tm(e,t,n){const s=e/2,a=xi([0,50],[0,s]);return(s-a(t)*n)*n}function wm(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Sm(e,t){if(t>0){const n=wm(e);return Math.min(...n)>=t}return!0}function xi(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function Am(e){return(String(e).split(".")[1]||"").length}function jm(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var cl=Qa,Cm=il,Mm=rl,Em=ol;const ul=p.forwardRef(({className:e,...t},n)=>o.jsxs(cl,{ref:n,className:K("relative flex w-full touch-none select-none items-center",e),...t,children:[o.jsx(Cm,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:o.jsx(Mm,{className:"absolute h-full bg-primary"})}),o.jsx(Em,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ul.displayName=cl.displayName;const Pm=()=>{const[e,t]=p.useState([.33,.34,.33]),n=["Product A","Product B","Product C"],s=["High Demand","Medium Demand","Low Demand"],i=[[200,100,-50],[150,120,30],[80,80,80]],a=p.useMemo(()=>i.map(c=>c.reduce((u,d,h)=>u+d*e[h],0)),[e]),r=p.useMemo(()=>a.indexOf(Math.max(...a)),[a]),l=(c,u)=>{const d=[...e],h=d[c],f=u-h,g=[0,1,2].filter(b=>b!==c),y=g.reduce((b,v)=>b+d[v],0);y>0?g.forEach(b=>{d[b]=Math.max(0,d[b]-f*d[b]/y)}):g.forEach(b=>{d[b]=(1-u)/2}),d[c]=u;const x=d.reduce((b,v)=>b+v,0);x>0&&d.forEach((b,v)=>{d[v]=d[v]/x}),t(d)};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6",children:[o.jsxs("h3",{className:"font-semibold text-lg mb-4 flex items-center gap-2",children:[o.jsx(Hl,{className:"w-5 h-5 text-primary"}),"Set Your Probability Beliefs"]}),o.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Adjust the sliders to set probabilities for each market scenario. The probabilities automatically adjust to sum to 100%."}),o.jsx("div",{className:"space-y-6",children:s.map((c,u)=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"font-medium",children:c}),o.jsxs("span",{className:K("font-bold text-lg min-w-[60px] text-right",e[u]>.4?"text-primary":"text-muted-foreground"),children:[(e[u]*100).toFixed(0),"%"]})]}),o.jsx(ul,{value:[e[u]*100],onValueChange:d=>l(u,d[0]/100),max:100,min:0,step:1,className:"w-full"})]},c))})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(Pt,{className:"border border-border rounded-lg",children:[o.jsx(Dt,{children:o.jsxs(Le,{className:"bg-muted/30",children:[o.jsx(Se,{className:"font-bold text-foreground border-r border-border",children:"Alternatives"}),s.map((c,u)=>o.jsx(Se,{className:"text-center",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"font-semibold",children:c}),o.jsxs("span",{className:"text-xs text-primary font-bold",children:["P = ",(e[u]*100).toFixed(0),"%"]})]})},c)),o.jsx(Se,{className:"text-center font-bold border-l-2 border-primary/50 bg-primary/5",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:"Expected"}),o.jsx("span",{children:"Utility"})]})})]})}),o.jsx(Rt,{children:n.map((c,u)=>o.jsxs(Le,{className:K("transition-colors duration-300",u===r&&"bg-primary/5"),children:[o.jsxs(ge,{className:"font-medium border-r border-border",children:[c,u===r&&o.jsx("span",{className:"ml-2 text-xs text-primary font-bold",children:" Best"})]}),i[u].map((d,h)=>o.jsx(ge,{className:"text-center",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("span",{className:"text-lg font-medium",children:["$",d,"k"]}),o.jsxs("span",{className:"text-xs text-muted-foreground",children:[" ",(e[h]*100).toFixed(0),"% = ",(d*e[h]).toFixed(1)]})]})},h)),o.jsxs(ge,{className:K("text-center border-l-2 border-primary/50 font-bold text-lg transition-all duration-300",u===r?"bg-primary/20 text-primary":"text-foreground"),children:["$",a[u].toFixed(1),"k"]})]},c))})]})}),o.jsxs("div",{className:"bg-primary/10 border border-primary/30 rounded-lg p-4",children:[o.jsxs("p",{className:"font-semibold text-primary flex items-center gap-2",children:[o.jsx(Ol,{className:"w-5 h-5"}),"Optimal Decision: ",n[r]]}),o.jsxs("p",{className:"text-muted-foreground text-sm mt-2",children:["With your current probability beliefs, ",o.jsx("strong",{children:n[r]})," has the highest expected utility of ",o.jsxs("strong",{children:["$",a[r].toFixed(1),"k"]}),"."]}),o.jsx("p",{className:"text-muted-foreground text-sm mt-2",children:o.jsx("em",{children:"Try adjusting the probabilities above to see how your optimal choice changes!"})})]}),o.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 border border-border",children:[o.jsxs("h4",{className:"font-semibold mb-2",children:["Calculation for ",n[r],":"]}),o.jsxs("p",{className:"font-mono text-sm",children:["EU = ",i[r].map((c,u)=>`(${c}  ${(e[u]*100).toFixed(0)}%)`).join(" + ")]}),o.jsxs("p",{className:"font-mono text-sm mt-1",children:["EU = ",i[r].map((c,u)=>(c*e[u]).toFixed(1)).join(" + ")," = ",o.jsxs("strong",{children:["$",a[r].toFixed(1),"k"]})]})]})]})},Dm=({isPreview:e,onEditSection:t})=>o.jsxs(o.Fragment,{children:[o.jsxs(ee,{id:"expected-utility-header",padding:"lg",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:1,children:"Maximizing Expected Utility"}),o.jsx(X,{className:"text-lg text-muted-foreground mt-2",children:"When you have probability information, make decisions that maximize your expected outcome."})]}),o.jsxs(ee,{id:"expected-utility-intro",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"From Uncertainty to Risk"}),o.jsxs(X,{children:["So far, we've explored decision criteria that assume we have ",o.jsx("strong",{children:"no information"})," about which state of nature is more likely. But what if you ",o.jsx("em",{children:"do"})," have some probability estimates? Perhaps market research suggests there's a 50% chance of high demand, 30% chance of medium demand, and 20% chance of low demand. This is called decision-making under"," ",o.jsx(Fe,{tooltip:"A situation where the probabilities of different outcomes are known or can be estimated, unlike pure uncertainty where probabilities are unknown.",children:"risk"})," ","(as opposed to uncertainty), and it allows us to use a powerful tool: ",o.jsx("strong",{children:"Expected Utility"}),"."]})]}),o.jsxs(ee,{id:"expected-utility-formula",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"The Expected Utility Formula"}),o.jsxs(X,{children:[o.jsx(Fe,{tooltip:"The weighted average of all possible payoffs, where each payoff is weighted by its probability of occurring.",children:"Expected Utility (EU)"})," ","is calculated by multiplying each possible payoff by its probability and summing up the results:"]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-6 my-6 text-center",children:[o.jsx("p",{className:"text-xl font-semibold mb-2",children:"EU(Alternative) =  (Probability  Payoff)"}),o.jsx("p",{className:"text-muted-foreground text-sm",children:"For each state of nature, multiply the payoff by its probability, then add them all together."})]}),o.jsxs(X,{children:["The alternative with the ",o.jsx("strong",{children:"highest expected utility"})," is considered the rational choice when you have probability information. This approach balances both the magnitude of payoffs and how likely each outcome is to occur."]})]}),o.jsxs(ee,{id:"expected-utility-example",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"A Quick Example"}),o.jsxs(X,{children:["Let's say you believe there's a ",o.jsx("strong",{children:"50%"})," chance of High Demand, ",o.jsx("strong",{children:"30%"})," chance of Medium Demand, and ",o.jsx("strong",{children:"20%"})," chance of Low Demand. For Product A:"]}),o.jsxs("div",{className:"bg-muted/30 rounded-lg p-4 my-4 border border-border font-mono text-sm",children:[o.jsx("p",{children:"EU(Product A) = (0.50  $200k) + (0.30  $100k) + (0.20  $50k)"}),o.jsxs("p",{className:"mt-2",children:["EU(Product A) = $100k + $30k  $10k = ",o.jsx("strong",{children:"$120k"})]})]}),o.jsxs(X,{children:["This means that ",o.jsx("em",{children:"on average"}),", if you made this decision many times under similar conditions, Product A would yield about $120k. Now let's calculate for all alternatives and find the best one!"]})]}),o.jsxs(ee,{id:"expected-utility-calculator",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"Interactive Calculator"}),o.jsx(X,{children:"Adjust the probability sliders below to see how different beliefs about the future change which alternative is optimal. Watch the expected utilities update in real-time!"}),o.jsx("div",{className:"mt-6",children:o.jsx(Pm,{})})]}),o.jsxs(ee,{id:"expected-utility-insight",padding:"md",isPreview:e,onEditSection:t,children:[o.jsx(te,{level:2,children:"Key Insights"}),o.jsx(X,{children:"Notice something interesting: the optimal choice depends heavily on your probability beliefs!"}),o.jsxs("div",{className:"grid gap-4 mt-4 md:grid-cols-2",children:[o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[o.jsx("h3",{className:"font-semibold text-primary mb-2",children:"When High Demand is Very Likely"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"If you're confident the market will be strong (high probability of High Demand), Product A becomes attractive despite its downside risk  similar to the Maximax mindset."})]}),o.jsxs("div",{className:"bg-card border border-border rounded-lg p-4 shadow-sm",children:[o.jsx("h3",{className:"font-semibold text-primary mb-2",children:"When Low Demand is Very Likely"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"If you fear the market will be weak (high probability of Low Demand), Product C's guaranteed $80k looks better  similar to the Maximin mindset."})]})]}),o.jsxs(X,{className:"mt-4",children:["In fact, Maximax and Maximin can be seen as ",o.jsx("strong",{children:"special cases"})," of Expected Utility: Maximax assumes 100% probability on the best state, while Maximin assumes 100% on the worst state. Expected Utility gives you a more nuanced approach when you have real probability estimates."]})]})]}),Rm=()=>o.jsx(o.Fragment,{}),_m=[o.jsx(mt,{maxWidth:"xl",children:o.jsx(sm,{})},"introduction"),o.jsx(mt,{maxWidth:"xl",children:o.jsx(rm,{})},"maximax"),o.jsx(mt,{maxWidth:"xl",children:o.jsx(am,{})},"maximin"),o.jsx(mt,{maxWidth:"xl",children:o.jsx(cm,{})},"minimax-regret"),o.jsx(mt,{maxWidth:"xl",children:o.jsx(Dm,{})},"expected-utility"),o.jsx(mt,{maxWidth:"xl",children:o.jsx(Rm,{})},"comparison")];export{_m as sections};
